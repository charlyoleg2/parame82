import{a as za,b as Ga}from"../chunks/SKMZLhYH.js";import{H as Ba,a as Ta,g as Ha}from"../chunks/BZp_1NqM.js";import"../chunks/DsnmJJEf.js";import{i as oa,aR as pa,J as Gt,a8 as Ja,aS as Ua,o as Qa,aT as $a,aU as ts,W as es,H as as,w as Ia,a9 as qa,aV as ss,aW as ls,ah as y,g as r,aD as rs,ag as ee,aX as Ft,p as bt,at as Ve,a as zt,b as C,c as ht,f as R,d as s,r as e,t as et,s as a,as as K,au as yt,e as D,aw as Dt,u as ka,aY as We,aZ as la,av as Sa,a_ as ha,a$ as La,b0 as ns}from"../chunks/CziT1XCT.js";import{s as E,e as Nt,o as ya,q as st,t as ca,u as os,w as cs,x as is,y as vs,z as ja,P as ra,A as Na,B as na,C as $t,D as us,F as ds,G as fs,H as ms,I as ma,J as _s,K as Aa,r as gs,f as _e,m as _a,L as nt,M as bs,N as Ca,O as hs,Q as ys,R as ps,S as ks}from"../chunks/Cl7kyVUV.js";import{p as St,i as te,b as ia}from"../chunks/RgFtBYQ_.js";import{s as js}from"../chunks/qGOfSBod.js";import{p as Oa}from"../chunks/CzVHU-a6.js";import{a as ws,o as Ds}from"../chunks/fCVZ51zT.js";import{i as xs}from"../chunks/C2Rxz0g2.js";function Xa(l){var t,o,n="";if(typeof l=="string"||typeof l=="number")n+=l;else if(typeof l=="object")if(Array.isArray(l)){var v=l.length;for(t=0;t<v;t++)l[t]&&(o=Xa(l[t]))&&(n&&(n+=" "),n+=o)}else for(o in l)l[o]&&(n&&(n+=" "),n+=o);return n}function zs(){for(var l,t,o=0,n="",v=arguments.length;o<v;o++)(l=arguments[o])&&(t=Xa(l))&&(n&&(n+=" "),n+=t);return n}function Pa(l){return typeof l=="object"?zs(l):l??""}const Fa=[...` 	
\r\fÂ \v\uFEFF`];function Ss(l,t,o){var n=l==null?"":""+l;if(t&&(n=n?n+" "+t:t),o){for(var v in o)if(o[v])n=n?n+" "+v:v;else if(n.length)for(var c=v.length,u=0;(u=n.indexOf(v,u))>=0;){var i=u+c;(u===0||Fa.includes(n[u-1]))&&(i===n.length||Fa.includes(n[i]))?n=(u===0?"":n.substring(0,u))+n.substring(i+1):u=i}}return n===""?null:n}function pt(l,t,o,n,v,c){var u=l.__className;if(oa||u!==o||u===void 0){var i=Ss(o,n,c);(!oa||i!==l.getAttribute("class"))&&(i==null?l.removeAttribute("class"):l.className=i),l.__className=o}else if(c&&v!==c)for(var d in c){var p=!!c[d];(v==null||p!==!!v[d])&&l.classList.toggle(d,p)}return c}function Wa(l,t,o=!1){if(l.multiple){if(t==null)return;if(!Qa(t))return $a();for(var n of l.options)n.selected=t.includes(Ee(n));return}for(n of l.options){var v=Ee(n);if(ts(v,t)){n.selected=!0;return}}(!o||t!==void 0)&&(l.selectedIndex=-1)}function Ls(l){var t=new MutationObserver(()=>{Wa(l,l.__value)});t.observe(l,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),es(()=>{t.disconnect()})}function Ma(l,t,o=t){var n=new WeakSet,v=!0;pa(l,"change",c=>{var u=c?"[selected]":":checked",i;if(l.multiple)i=[].map.call(l.querySelectorAll(u),Ee);else{var d=l.querySelector(u)??l.querySelector("option:not([disabled])");i=d&&Ee(d)}o(i),Gt!==null&&n.add(Gt)}),Ja(()=>{var c=t();if(l===document.activeElement){var u=Ua??Gt;if(n.has(u))return}if(Wa(l,c,v),v&&c===void 0){var i=l.querySelector(":checked");i!==null&&(c=Ee(i),o(c))}l.__value=c,v=!1}),Ls(l)}function Ee(l){return"__value"in l?l.__value:l.value}function ge(l,t,o=t){var n=new WeakSet;pa(l,"input",async v=>{var c=v?l.defaultValue:l.value;if(c=ga(l)?ba(c):c,o(c),Gt!==null&&n.add(Gt),await as(),c!==(c=t())){var u=l.selectionStart,i=l.selectionEnd,d=l.value.length;if(l.value=c??"",i!==null){var p=l.value.length;u===i&&i===d&&p>d?(l.selectionStart=p,l.selectionEnd=p):(l.selectionStart=u,l.selectionEnd=Math.min(i,p))}}}),(oa&&l.defaultValue!==l.value||Ia(t)==null&&l.value)&&(o(ga(l)?ba(l.value):l.value),Gt!==null&&n.add(Gt)),qa(()=>{var v=t();if(l===document.activeElement){var c=Ua??Gt;if(n.has(c))return}ga(l)&&v===ba(l.value)||l.type==="date"&&!v&&!l.value||v!==l.value&&(l.value=v??"")})}function xt(l,t,o=t){pa(l,"change",n=>{var v=n?l.defaultChecked:l.checked;o(v)}),(oa&&l.defaultChecked!==l.checked||Ia(t)==null)&&o(l.checked),qa(()=>{var n=t();l.checked=!!n})}function ga(l){var t=l.type;return t==="number"||t==="range"}function ba(l){return l===""?null:+l}function Ns(l,t){ss(window,["resize"],()=>ls(()=>t(window[l])))}function As(l){var t=rs(0);return function(){return arguments.length===1?(y(t,r(t)+1),arguments[0]):(r(t),l())}}function Cs(l,t){throw new Ba(l,t)}function Os({params:l}){const t=l.design;if(Object.keys(za).includes(t))return{pageDef:za[t],allLink:Ga};Cs(404,"Design undefined!")}const Xl=Object.freeze(Object.defineProperty({__proto__:null,load:Os},Symbol.toStringTag,{value:"Module"})),H=ee({});function Ya(l,t,o){if(Object.keys(H).includes(l)){const v=H[l],c=Object.keys(v);for(const u of Object.keys(t))c.includes(u)?o&&(v[u]=t[u]):v[u]=t[u];H[l]=v}else H[l]=t}function Ps(l){const t=l.pDef.partName,o={};for(const n of l.pDef.params)o[n.name]=n.init;Ya(t,o,!1)}var Fs=R('<aside class="backdrop svelte-1eo7hy3"><div class="dialog svelte-1eo7hy3"><button class="svelte-1eo7hy3"><img/></button></div></aside>');function Ea(l,t){bt(t,!0);let o=St(t,"modalOpen",15);function n(){o(!1)}var v=Ve(),c=zt(v);{var u=i=>{var d=Fs(),p=s(d),m=s(p);m.__click=n;var z=s(m);e(m),e(p),e(d),et(()=>{E(z,"src",t.svgPath),E(z,"alt",t.svgPath)}),C(i,d)};te(c,i=>{o()&&i(u)})}C(l,v),ht()}Ft(["click"]);var Ms=R('<button class="svelte-194ozc5"><img class="svelte-194ozc5"/></button>'),Rs=R('<section class="svelte-194ozc5"><!> <!></section>');function Ts(l,t){bt(t,!0);function o(m){const z=[];for(const N of Object.values(m.paramSvg))z.includes(N)||z.push(N);return z}let n=K(!1),v=K(""),c=yt(()=>o(t.pDef).map(m=>ya(`/pgdsvg/${m}`)));function u(m){y(v,m,!0),y(n,!0)}var i=Rs(),d=s(i);Ea(d,{get svgPath(){return r(v)},get modalOpen(){return r(n)},set modalOpen(m){y(n,m,!0)}});var p=a(d,2);Nt(p,16,()=>r(c),m=>m,(m,z)=>{var N=Ms();N.__click=()=>u(z);var k=s(N);e(N),et(()=>{E(k,"src",z),E(k,"alt",z)}),C(m,N)}),e(i),C(l,i),ht()}Ft(["click"]);var Us=R('<aside class="backdrop svelte-184rdut"><div><article class="question svelte-184rdut"><!></article> <footer class="svelte-184rdut"><button class="cancel svelte-184rdut">Cancel</button> <button class="ok svelte-184rdut"> </button></footer></div></aside>');function Ye(l,t){bt(t,!0);let o=St(t,"okName",3,"Ok"),n=St(t,"modalOpen",15),v=St(t,"sizeLarge",3,!1);function c(){n(!1)}function u(){t.okFunc(),n(!1)}var i=Ve(),d=zt(i);{var p=m=>{var z=Us(),N=s(z);let k;var f=s(N),I=s(f);js(I,()=>t.children),e(f);var T=a(f,2),V=s(T);V.__click=c;var A=a(V,2);A.__click=u;var Q=s(A,!0);e(A),e(T),e(N),e(z),et(()=>{k=pt(N,1,"dialog svelte-184rdut",null,k,{sizeLarge:v()}),D(Q,o())}),C(m,z)};te(d,m=>{n()&&m(p)})}C(l,i),ht()}Ft(["click"]);var Is=R('<p class="diagItem svelte-1butpnr"> </p>'),qs=R('<p class="diagTitle svelte-1butpnr">Do you really want to delete the following localStorage keys?</p> <!>',1),Xs=R('<tr class="svelte-1butpnr"><td><input type="checkbox"/></td><td class="svelte-1butpnr"><button class="svelte-1butpnr"> </button></td><td> </td></tr>'),Ws=R('<div class="deleteKeys svelte-1butpnr"><button class="svelte-1butpnr">Delete</button> <!> <table class="svelte-1butpnr"><thead class="svelte-1butpnr"><tr><td>Delete</td><td>Key name</td><td>Last modification</td></tr><tr><td><input type="checkbox"/></td><td class="instruction">delete all</td><td></td></tr></thead><tbody class="svelte-1butpnr"></tbody></table></div>');function Va(l,t){bt(t,!0);let o=St(t,"storeName",15),n=St(t,"localKeys",15),v=K(ee({})),c=K(!1),u=K(!1);function i(){let _=[];const U=new RegExp(`^${t.pageName}_`);return _=Object.keys(window.localStorage).filter(Y=>U.test(Y)).map(Y=>Y.replace(U,"")),_.sort(),_}n(i());function d(_){o(_)}function p(_){let U={};for(const Z of _){let Y="";const $=`${t.pageName}_${Z}`,J=window.localStorage.getItem($);J!==null&&(Y=JSON.parse(J).lastModif),U[Z]=Y}return U}let m=yt(()=>p(n()));function z(_){let U={};for(const Z of _)U[Z]=!1;return U}y(v,z(n()),!0);function N(){for(const _ of n())r(v)[_]=r(c)}function k(){for(const _ of n())if(r(v)[_]){const U=`${t.pageName}_${_}`;window.localStorage.removeItem(U)}y(c,!1),n(i())}var f=Ws(),I=s(f);I.__click=()=>{y(u,!0)};var T=a(I,2);Ye(T,{okName:"Confirm",okFunc:k,get modalOpen(){return r(u)},set modalOpen(_){y(u,_,!0)},children:(_,U)=>{var Z=qs(),Y=a(zt(Z),2);Nt(Y,16,n,$=>$,($,J)=>{var it=Ve(),at=zt(it);{var G=ft=>{var rt=Is(),vt=s(rt,!0);e(rt),et(()=>D(vt,J)),C(ft,rt)};te(at,ft=>{r(v)[J]&&ft(G)})}C($,it)}),C(_,Z)},$$slots:{default:!0}});var V=a(T,2),A=s(V),Q=a(s(A)),lt=s(Q),ot=s(lt);st(ot),ot.__change=N,e(lt),Dt(2),e(Q),e(A);var ct=a(A);Nt(ct,20,n,_=>_,(_,U)=>{var Z=Xs(),Y=s(Z),$=s(Y);st($),e(Y);var J=a(Y),it=s(J);it.__click=()=>d(U);var at=s(it,!0);e(it),e(J);var G=a(J),ft=s(G,!0);e(G),e(Z),et(()=>{D(at,U),D(ft,r(m)[U])}),xt($,()=>r(v)[U],rt=>r(v)[U]=rt),C(_,Z)}),e(ct),e(V),e(f),xt(ot,()=>r(c),_=>y(c,_)),C(l,f),ht()}Ft(["click","change"]);var Ys=R('<p class="warnMsg svelte-1caewi6"> </p>'),Es=R('<!> <div class="svelte-1caewi6"><label for="storName" class="svelte-1caewi6">Give a name to your parameter-set:</label> <input type="text" id="storName" required minlength="4" maxlength="30" size="32" class="svelte-1caewi6"/> <!></div>',1);function Vs(l,t){bt(t,!0);let o=St(t,"storeName",15),n=K(ee([]));function v(N){const k=/[-:]/g,f=/\..*$/,I=new Date().toISOString().replace(k,"").replace(f,"").replace("T","_");return`${N}_${I}`}o(v(t.pageName));let c=yt(()=>r(n).includes(o()));var u=Es(),i=zt(u);Va(i,{get pageName(){return t.pageName},get storeName(){return o()},set storeName(N){o(N)},get localKeys(){return r(n)},set localKeys(N){y(n,N,!0)}});var d=a(i,2),p=a(s(d),2);st(p);var m=a(p,2);{var z=N=>{var k=Ys(),f=s(k);e(k),et(()=>D(f,`Warning: name ${o()??""} already used`)),C(N,k)};te(m,N=>{r(c)&&N(z)})}e(d),ge(p,o),C(l,u),ht()}var Zs=R('<!> <div class="svelte-125b9h3"><label for="storName" class="svelte-125b9h3">Select a parameter-set:</label> <input type="text" id="storName" readonly="" minlength="4" maxlength="30" size="32" class="svelte-125b9h3"/></div>',1);function Ks(l,t){bt(t,!0);let o=St(t,"storeName",15),n=K(ee([]));function v(p){let m=o();return!p.includes(m)&&(p.length>0?m=p[0]:m=""),m}ka(()=>{o(v(r(n)))});var c=Zs(),u=zt(c);Va(u,{get pageName(){return t.pageName},get storeName(){return o()},set storeName(p){o(p)},get localKeys(){return r(n)},set localKeys(p){y(n,p,!0)}});var i=a(u,2),d=a(s(i),2);st(d),e(i),et(()=>ca(d,o())),C(l,c),ht()}const w=ee({dLayers:cs(),zAdjust:os(),canvasZWidth:0});var Gs=R('<canvas class="mini svelte-19kh8uj"></canvas>');function Ra(l,t){bt(t,!0);const o=200,n=.6;let v;function c(d,p,m,z){const N=is(z);N.ruler=!1;let k;if(v){const f=v.getContext("2d");f.clearRect(0,0,f.canvas.width,f.canvas.height);const I=f.canvas.width;try{t.full?k=d.getAdjustFull(f.canvas.width,f.canvas.height):k=vs(m,I,p),d.draw(f,k,N)}catch(T){console.log(T)}}}ka(()=>{c(t.pFig,w.zAdjust,w.canvasZWidth,w.dLayers)});function u(d){const p=d.offsetX,m=d.offsetY,z=v.getContext("2d"),N=z.canvas.width/2,k=z.canvas.height/2;if(d.button===0){let f=1;p>N&&(f+=1*n),m>k&&(f+=2*n),z.canvas.width=f*o,z.canvas.height=f*o,c(t.pFig,w.zAdjust,w.canvasZWidth,w.dLayers)}}var i=Gs();E(i,"width",o),E(i,"height",o),i.__click=u,ia(i,d=>v=d,()=>v),C(l,i),ht()}Ft(["click"]);function Bs(l,t){const o=document.createElement("a");o.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),o.setAttribute("download",l),o.click(),o.remove()}function Hs(l,t,o){const n=/[-:]/g,v=/\..*$/,c=new Date().toISOString().replace(n,"").replace(v,"").replace("T","_");return ja(c,l,t,o)}function wa(l,t,o){const n=/[-:]/g,v=/\..*$/,c=new Date().toISOString().replace(n,"").replace(v,"").replace("T","_"),u=`px_${l}_${c}.json`,i=ja(c,l,t,o);Bs(u,i)}function Js(l,t,o){const n=new URL(l),v=2e3;let c=n.toString().length;for(const u of Object.keys(t)){const i=t[u].toString(),d=2+u.length+i.length;n.searchParams.append(encodeURIComponent(u),encodeURIComponent(i)),c+=d}return c>=v&&console.log(`warn547: generateUrl: strLength ${c} larger than strLengthLimit ${v}`),n.toString()}const Qs=Symbol();class $s extends URLSearchParams{#t=K(0);#s=el();#e=!1;#a(){if(!this.#s||this.#e)return;this.#e=!0;const t=this.toString();this.#s.search=t&&`?${t}`,this.#e=!1}[Qs](t){if(!this.#e){this.#e=!0;for(const o of[...super.keys()])super.delete(o);for(const[o,n]of t)super.append(o,n);We(this.#t),this.#e=!1}}append(t,o){super.append(t,o),this.#a(),We(this.#t)}delete(t,o){var n=super.has(t,o);super.delete(t,o),n&&(this.#a(),We(this.#t))}get(t){return r(this.#t),super.get(t)}getAll(t){return r(this.#t),super.getAll(t)}has(t,o){return r(this.#t),super.has(t,o)}keys(){return r(this.#t),super.keys()}set(t,o){var n=super.getAll(t).join("");super.set(t,o),n!==super.getAll(t).join("")&&(this.#a(),We(this.#t))}sort(){super.sort(),this.#a(),We(this.#t)}toString(){return r(this.#t),super.toString()}values(){return r(this.#t),super.values()}entries(){return r(this.#t),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return r(this.#t),super.size}}let tl=null;function el(){return tl}var al=R('<input type="number" class="input-number svelte-4zghm5"/> <input type="range" class="svelte-4zghm5"/>',1),sl=R("<option> </option>"),ll=R("<select></select>"),rl=R("<option> </option>"),nl=R("<select></select>"),ol=R('<tr><td class="svelte-4zghm5"> </td><td class="svelte-4zghm5"><button class="svelte-4zghm5"> </button></td><td class="svelte-4zghm5"><!></td><td> </td><td> </td><td class="svelte-4zghm5"> </td><td class="svelte-4zghm5"> </td><td> </td></tr>'),cl=R('<tbody class="svelte-4zghm5"><tr class="separator svelte-4zghm5"><td class="svelte-4zghm5"> </td><td class="svelte-4zghm5"> </td><td class="svelte-4zghm5"><label class="svelte-4zghm5"><input type="checkbox" class="svelte-4zghm5"/> <span class="svelte-4zghm5"></span></label></td></tr></tbody> <tbody></tbody>',1),il=R('<p>Copy this URL and send it to your friends!</p> <p class="cUrl svelte-4zghm5"> </p>',1),vl=R('<section class="svelte-4zghm5"><h2 class="svelte-4zghm5">Parameters</h2> <main class="svelte-4zghm5"><label for="loadFParams" class="fileUpload svelte-4zghm5">Load Params from File</label> <input id="loadFParams" type="file" accept="text/plain, application/json" class="svelte-4zghm5"/> <button class="svelte-4zghm5">Set Params Default</button> <button class="svelte-4zghm5">Load Params from localStorage</button> <!> <!> <textarea rows="3" cols="80" readonly="" wrap="soft"></textarea> <table class="svelte-4zghm5"><thead class="svelte-4zghm5"><tr class="svelte-4zghm5"><td class="svelte-4zghm5">&#35;</td><td class="svelte-4zghm5">Parameter name</td><td class="svelte-4zghm5">Value<span class="svelte-4zghm5"><button class="svelte-4zghm5">&minus;</button><button class="svelte-4zghm5">+</button></span></td><td>Unit</td><td>Default</td><td class="svelte-4zghm5">Min</td><td class="svelte-4zghm5">Max</td><td>Step</td></tr></thead><!></table> <div class="comment svelte-4zghm5"><label for="inComment">Comment:</label> <input type="text" id="inComment" maxlength="150"/></div> <button class="svelte-4zghm5">Save Parameters to File</button> <button class="svelte-4zghm5">Save Parameters as URL</button> <button class="svelte-4zghm5">Save Parameters to localStorage</button> <!> <!></main> <!> <button class="side-img svelte-4zghm5"><img class="svelte-4zghm5"/></button> <div class="mini-canvas svelte-4zghm5"><!></div> <div class="mini-canvas svelte-4zghm5"><!></div></section>');function ul(l,t){bt(t,!0);let o=K(""),n=K(!1),v=K(""),c=K(!1),u=K(!1),i=K(!1),d=K(!1),p=K(!1),m=K(""),z=K(""),N=K("");const k=t.pDef;let f=K(ee(at(k.params[0].name))),I=K(!1),T=K(ee(vt(rt(k.params))));Ta(()=>{y(f,at(t.pDef.params[0].name),!0),y(T,vt(rt(t.pDef.params)),!0)});function V(b,h){let L="",M=!1;b!==t.pDef.partName&&(L+=`warn361: read partName: '${b}'  expected partName: '${t.pDef.partName}'
`,M=!0);let tt=0,ut=0,Lt=0;const ie=[];for(const mt of t.pDef.params)ie.push(mt.name),Object.hasOwn(h,mt.name)?(tt+=1,H[t.pDef.partName][mt.name]===h[mt.name]?Lt+=1:H[t.pDef.partName][mt.name]=h[mt.name]):ut+=1;let jt=0;for(const mt of Object.keys(h))ie.includes(mt)||(jt+=1,L+=`warn363: parameter ${mt} not in the scope of the design (${jt})
`);const Se=jt>0,Et=new Date().toLocaleTimeString();return L+=`Params loaded at ${Et} :`,L+=` def-nb: ${Object.keys(t.pDef.params).length}`,L+=`, cover-nb: ${tt}, uncover-nb: ${ut}
`,L+=` load-nb: ${Object.keys(h).length}`,L+=`, equal-nb: ${Lt}, changed-nb: ${tt-Lt}`,L+=`, out-of-scope: ${jt}`,[L,M||Se]}async function A(b){try{const h=await fetch(b);if(!h.ok)throw`err627: error while fetching ${b}`;const L=await h.text(),[M]=Na(L);(tt=>{var ut=la(tt,2);y(v,ut[0],!0),y(c,ut[1],!0)})(V(M.partName,M.pVal)),y(o,M.comment,!0)}catch(h){let L=`err223: error by fetching px file
`;L+=h,y(v,L,!0),y(c,!0)}}async function Q(){{const b=new $s(Oa.url.search),h="pxUrl";if(b.has(h)){const M=b.get(h);b.delete(h),M?await A(M):(y(v,`err123: error by parsing URL-search-params
`),y(c,!0))}const L={};for(const[M,tt]of b){const ut=Number(tt);isNaN(ut)||(L[M]=ut)}Object.keys(L).length>0&&(M=>{var tt=la(M,2);y(v,tt[0],!0),y(c,tt[1],!0)})(V(t.pDef.partName,L))}}Q();function lt(b){try{const[h]=Na(b);(L=>{var M=la(L,2);y(v,M[0],!0),y(c,M[1],!0)})(V(h.partName,h.pVal)),y(o,h.comment,!0)}catch(h){let L=`err723: error by parsing parameter file
`;L+=h,y(v,L,!0),y(c,!0)}}async function ot(b){const h=await b.text();lt(h)}function ct(b){if(b.target){const h=b.target.files;h&&ot(h[0])}}function _(){wa(t.pDef.partName,H[t.pDef.partName],r(o))}function U(){const b={};for(const h of t.pDef.params)b[h.name]=h.init;(h=>{var L=la(h,2);y(v,L[0],!0),y(c,L[1],!0)})(V(t.pDef.partName,b))}function Z(){if(r(m)!==void 0&&r(m)!==""){const b=`${t.pDef.partName}_${r(m)}`;{const h=window.localStorage.getItem(b);h===null?(y(v,`Warn157: localStorage key ${b} is null`),y(c,!0)):lt(h)}}else y(v,"Warn239: No valid name for loading from localStorage!"),y(c,!0)}function Y(){if(r(z)!==void 0&&r(z)!==""){const b=`${t.pDef.partName}_${r(z)}`,h=/\..*$/,L=new Date().toISOString().replace(h,""),M=ja(L,t.pDef.partName,H[t.pDef.partName],r(o));window.localStorage.setItem(b,M)}else console.log("Warn639: No valid name for writing to localStorage!")}function $(){return Js(Oa.url.href,H[t.pDef.partName]).toString()}function J(){y(N,$(),!0),y(d,!0)}function it(){}function at(b){let h=ya("/pgdsvg/default_param_blank.svg");return Object.keys(t.pDef.paramSvg).includes(b)&&(h=ya(`/pgdsvg/${t.pDef.paramSvg[b]}`)),h}function G(b){y(f,at(b),!0)}function ft(){y(I,!0)}function rt(b){const h=[];let M={sectionName:"main",sectionID:"g0main",sectionVisCollapse:!1,params:[]},tt=0;for(const ut of b)ut.pType===ra.eSectionSeparator?(h.push(M),tt+=1,M={sectionName:ut.name,sectionID:`g${tt}${ut.name}`,sectionVisCollapse:!0,params:[]}):M.params.push(ut);return h.push(M),h}function vt(b){const h={};for(const L of b)h[L.sectionID]=L.sectionVisCollapse;return h}let Mt=yt(()=>rt(t.pDef.params));function g(){y(n,!0)}function S(){y(n,!1)}let O=yt(()=>r(n)?2:4),X=yt(()=>r(n)?2:3),At=yt(()=>r(n)?50:70);var kt=vl(),Rt=a(s(kt),2),It=a(s(Rt),2);It.__change=ct;var qt=a(It,2);qt.__click=()=>{y(u,!0)};var Tt=a(qt,2);Tt.__click=()=>{y(i,!0)};var Ct=a(Tt,2);Ye(Ct,{okName:"Overwrite Parameters",okFunc:U,get modalOpen(){return r(u)},set modalOpen(b){y(u,b,!0)},children:(b,h)=>{Dt();var L=Sa("Load the default parameters ?");C(b,L)},$$slots:{default:!0}});var ae=a(Ct,2);Ye(ae,{okName:"Load Parameters",okFunc:Z,get modalOpen(){return r(i)},set modalOpen(b){y(i,b,!0)},children:(b,h)=>{Ks(b,{get pageName(){return t.pDef.partName},get storeName(){return r(m)},set storeName(L){y(m,L,!0)}})},$$slots:{default:!0}});var Wt=a(ae,2);ha(Wt);let Ze;var se=a(Wt,2),be=s(se),he=s(be),Bt=a(s(he),2),le=a(s(Bt)),Ke=s(le);Ke.__click=g;var ye=a(Ke);ye.__click=S,e(le),e(Bt);var Ge=a(Bt);let re;var Be=a(Ge);let pe;var va=a(Be,3);let ke;e(he),e(be);var je=a(be);Nt(je,19,()=>r(Mt),b=>b.sectionName,(b,h,L)=>{var M=cl(),tt=zt(M),ut=s(tt),Lt=s(ut),ie=s(Lt,!0);e(Lt);var jt=a(Lt),Se=s(jt,!0);e(jt);var Et=a(jt),Le=s(Et),mt=s(Le);st(mt),Dt(2),e(Le),e(Et),e(ut),e(tt);var Jt=a(tt,2);let ea;Nt(Jt,23,()=>r(h).params,Xt=>Xt.name,(Xt,W,Ne)=>{var ve=ol();let Ae;var Ce=s(ve),Oe=s(Ce);e(Ce);var Qt=a(Ce),Pe=s(Qt);Pe.__click=()=>G(r(W).name);var Fe=s(Pe,!0);e(Pe),e(Qt);var Me=a(Qt),Re=s(Me);{var ua=P=>{var F=al(),x=zt(F);st(x);var B=a(x,2);st(B),et(()=>{E(x,"min",r(W).min),E(x,"max",r(W).max),E(x,"step",r(W).step),E(B,"min",r(W).min),E(B,"max",r(W).max),E(B,"step",r(W).step)}),ge(x,()=>H[t.pDef.partName][r(W).name],Ot=>H[t.pDef.partName][r(W).name]=Ot),ge(B,()=>H[t.pDef.partName][r(W).name],Ot=>H[t.pDef.partName][r(W).name]=Ot),C(P,F)},aa=P=>{var F=Ve(),x=zt(F);{var B=_t=>{var wt=ll();Nt(wt,22,()=>["Off","On"],dt=>dt,(dt,Pt,Ut)=>{var gt=sl(),Zt=s(gt,!0);e(gt);var Kt={};et(()=>{D(Zt,Pt),Kt!==(Kt=r(Ut))&&(gt.value=(gt.__value=r(Ut))??"")}),C(dt,gt)}),e(wt),Ma(wt,()=>H[t.pDef.partName][r(W).name],dt=>H[t.pDef.partName][r(W).name]=dt),C(_t,wt)},Ot=_t=>{var wt=Ve(),dt=zt(wt);{var Pt=gt=>{var Zt=nl();Nt(Zt,22,()=>r(W).dropdown,Kt=>Kt,(Kt,Za,Da)=>{var Xe=rl(),Ka=s(Xe,!0);e(Xe);var xa={};et(()=>{D(Ka,Za),xa!==(xa=r(Da))&&(Xe.value=(Xe.__value=r(Da))??"")}),C(Kt,Xe)}),e(Zt),Ma(Zt,()=>H[t.pDef.partName][r(W).name],Kt=>H[t.pDef.partName][r(W).name]=Kt),C(gt,Zt)},Ut=gt=>{var Zt=Sa("unknown");C(gt,Zt)};te(dt,gt=>{r(W).pType===ra.eDropdown?gt(Pt):gt(Ut,!1)},!0)}C(_t,wt)};te(x,_t=>{r(W).pType===ra.eCheckbox?_t(B):_t(Ot,!1)},!0)}C(P,F)};te(Re,P=>{r(W).pType===ra.eNumber?P(ua):P(aa,!1)})}e(Me);var ue=a(Me);let Te;var Ue=s(ue,!0);e(ue);var de=a(ue);let fe;var da=s(de,!0);e(de);var me=a(de),fa=s(me,!0);e(me);var Vt=a(me),Ie=s(Vt,!0);e(Vt);var qe=a(Vt);let sa;var j=s(qe,!0);e(qe),e(ve),et(()=>{Ae=pt(ve,1,"svelte-4zghm5",null,Ae,{changed:H[t.pDef.partName][r(W).name]!==r(W).init}),D(Oe,`${r(L)+1}.${r(Ne)+1}`),D(Fe,r(W).name),Te=pt(ue,1,"svelte-4zghm5",null,Te,{hideColumn:r(n)}),D(Ue,r(W).unit),fe=pt(de,1,"svelte-4zghm5",null,fe,{hideColumn:r(n)}),D(da,r(W).init),D(fa,r(W).min),D(Ie,r(W).max),sa=pt(qe,1,"svelte-4zghm5",null,sa,{hideColumn:r(n)}),D(j,r(W).step)}),C(Xt,ve)}),e(Jt),et(()=>{D(ie,r(L)+1),E(jt,"colspan",r(O)),D(Se,r(h).sectionName),E(Et,"colspan",r(X)),ea=pt(Jt,1,"svelte-4zghm5",null,ea,{collaps:r(T)[r(h).sectionID]})}),xt(mt,()=>r(T)[r(h).sectionID],Xt=>r(T)[r(h).sectionID]=Xt),C(b,M)}),e(se);var Ht=a(se,2),we=a(s(Ht),2);st(we),e(Ht);var ne=a(Ht,2);ne.__click=_;var He=a(ne,2);He.__click=J;var oe=a(He,2);oe.__click=()=>{y(p,!0)};var Je=a(oe,2);Ye(Je,{okName:"Done",okFunc:it,sizeLarge:!0,get modalOpen(){return r(d)},set modalOpen(b){y(d,b,!0)},children:(b,h)=>{var L=il(),M=a(zt(L),2),tt=s(M,!0);e(M),et(()=>D(tt,r(N))),C(b,L)},$$slots:{default:!0}});var Qe=a(Je,2);Ye(Qe,{okName:"Save into localStorage",okFunc:Y,get modalOpen(){return r(p)},set modalOpen(b){y(p,b,!0)},children:(b,h)=>{Vs(b,{get pageName(){return t.pDef.partName},get storeName(){return r(z)},set storeName(L){y(z,L,!0)}})},$$slots:{default:!0}}),e(Rt);var $e=a(Rt,2);Ea($e,{get svgPath(){return r(f)},get modalOpen(){return r(I)},set modalOpen(b){y(I,b,!0)}});var Yt=a($e,2);Yt.__click=ft;var ce=s(Yt);e(Yt);var De=a(Yt,2),xe=s(De);Ra(xe,{get pFig(){return t.pFig},full:!0}),e(De);var ta=a(De,2),ze=s(ta);Ra(ze,{get pFig(){return t.pFig},full:!1}),e(ta),e(kt),et(()=>{ca(Wt,r(v)),Ze=pt(Wt,1,"svelte-4zghm5",null,Ze,{colorWarn:r(c)}),re=pt(Ge,1,"svelte-4zghm5",null,re,{hideColumn:r(n)}),pe=pt(Be,1,"svelte-4zghm5",null,pe,{hideColumn:r(n)}),ke=pt(va,1,"svelte-4zghm5",null,ke,{hideColumn:r(n)}),E(we,"size",r(At)),E(ce,"src",r(f)),E(ce,"alt",r(f))}),ge(we,()=>r(o),b=>y(o,b)),C(l,kt),ht()}Ft(["change","click"]);var dl=R('<nav class="svelte-gut6al"><button class="svelte-gut6al">0</button> <button class="svelte-gut6al">&lt-</button> <button class="svelte-gut6al">|&lt</button> <button class="svelte-gut6al">||</button> <button class="svelte-gut6al">&gt|</button> <button class="svelte-gut6al">-&gt</button> <input type="range" min="0" class="svelte-gut6al"/> <input type="number" min="0" class="svelte-gut6al"/></nav>');function fl(l,t){bt(t,!0);let o=St(t,"tMax",3,10),n=St(t,"tStep",3,.1),v=St(t,"tUpdate",3,500),c=St(t,"simTime",15,0),u=null,i=0,d;const p=4;function m(){u!==null&&(clearInterval(u),u=null)}function z(){d<0&&c()<=0?c(o()):d>0&&c()>=o()?c(0):c(c()+d)}function N(){const J=v()/2**(Math.abs(i)-1);d=i<0?-n():n(),u=setInterval(z,J)}function k(){m(),c(0),i=0}function f(){m(),i=0,d=-n(),z()}function I(){m(),i=0,d=n(),z()}function T(){m(),i=Math.max(i-1,-p),N()}function V(){m(),i=Math.min(i+1,p),N()}function A(){m(),i=0}ws(()=>{m()});var Q=dl(),lt=s(Q);lt.__click=k;var ot=a(lt,2);ot.__click=T;var ct=a(ot,2);ct.__click=f;var _=a(ct,2);_.__click=A;var U=a(_,2);U.__click=I;var Z=a(U,2);Z.__click=V;var Y=a(Z,2);st(Y);var $=a(Y,2);st($),e(Q),et(()=>{E(Y,"max",o()),E(Y,"step",n()),E($,"max",o()),E($,"step",n())}),ge(Y,c),ge($,c),C(l,Q),ht()}Ft(["click"]);var ml=R('<nav class="svelte-1rrzfqn"><button aria-labelledby="zoomInit" class="svelte-1rrzfqn"><div class="zero svelte-1rrzfqn"></div></button><button aria-labelledby="zoomIn" class="svelte-1rrzfqn"><div class="zoomin svelte-1rrzfqn"></div></button><button aria-labelledby="zoomOut" class="svelte-1rrzfqn"><div class="zoomout svelte-1rrzfqn"></div></button><button aria-labelledby="moveLeft" class="svelte-1rrzfqn"><div class="arrowleft svelte-1rrzfqn"></div></button><button aria-labelledby="moveRight" class="svelte-1rrzfqn"><div class="arrowright svelte-1rrzfqn"></div></button><button aria-labelledby="moveUp" class="svelte-1rrzfqn"><div class="arrowup svelte-1rrzfqn"></div></button><button aria-labelledby="moveDown" class="svelte-1rrzfqn"><div class="arrowdown svelte-1rrzfqn"></div></button></nav>');function _l(l,t){bt(t,!0);var o=ml(),n=s(o);n.__click=()=>t.zoomClick("zoomInit");var v=a(n);v.__click=()=>t.zoomClick("zoomIn");var c=a(v);c.__click=()=>t.zoomClick("zoomOut");var u=a(c);u.__click=()=>t.zoomClick("moveLeft");var i=a(u);i.__click=()=>t.zoomClick("moveRight");var d=a(i);d.__click=()=>t.zoomClick("moveUp");var p=a(d);p.__click=()=>t.zoomClick("moveDown"),e(o),C(l,o),ht()}Ft(["click"]);var q=As(()=>w),gl=R('<div class="svelte-118srbk"><label class="svelte-118srbk"><input type="checkbox" class="svelte-118srbk"/>main part</label> <label class="svelte-118srbk"><input type="checkbox" class="svelte-118srbk"/>main skeleton</label> <label class="svelte-118srbk"><input type="checkbox" class="svelte-118srbk"/>second parts</label> <label class="svelte-118srbk"><input type="checkbox" class="svelte-118srbk"/>second skeletons</label> <label class="svelte-118srbk"><input type="checkbox" class="svelte-118srbk"/>dynamics</label> <label class="svelte-118srbk"><input type="checkbox" class="svelte-118srbk"/>ruler</label> <label class="svelte-118srbk"><input type="checkbox" class="svelte-118srbk"/>frame of reference</label> <label class="svelte-118srbk"><input type="checkbox" class="svelte-118srbk"/>points</label> <label class="svelte-118srbk"><input type="checkbox" class="svelte-118srbk"/>lines</label> <label class="svelte-118srbk"><input type="checkbox" class="svelte-118srbk"/>vectors</label></div>');function bl(l,t){bt(t,!1),xs();var o=gl(),n=s(o),v=s(n);st(v),Dt(),e(n);var c=a(n,2),u=s(c);st(u),Dt(),e(c);var i=a(c,2),d=s(i);st(d),Dt(),e(i);var p=a(i,2),m=s(p);st(m),Dt(),e(p);var z=a(p,2),N=s(z);st(N),Dt(),e(z);var k=a(z,2),f=s(k);st(f),Dt(),e(k);var I=a(k,2),T=s(I);st(T),Dt(),e(I);var V=a(I,2),A=s(V);st(A),Dt(),e(V);var Q=a(V,2),lt=s(Q);st(lt),Dt(),e(Q);var ot=a(Q,2),ct=s(ot);st(ct),Dt(),e(ot),e(o),xt(v,()=>q().dLayers.main,_=>q(q().dLayers.main=_)),xt(u,()=>q().dLayers.mainB,_=>q(q().dLayers.mainB=_)),xt(d,()=>q().dLayers.second,_=>q(q().dLayers.second=_)),xt(m,()=>q().dLayers.secondB,_=>q(q().dLayers.secondB=_)),xt(N,()=>q().dLayers.dynamics,_=>q(q().dLayers.dynamics=_)),xt(f,()=>q().dLayers.ruler,_=>q(q().dLayers.ruler=_)),xt(T,()=>q().dLayers.refframe,_=>q(q().dLayers.refframe=_)),xt(A,()=>q().dLayers.points,_=>q(q().dLayers.points=_)),xt(lt,()=>q().dLayers.lines,_=>q(q().dLayers.lines=_)),xt(ct,()=>q().dLayers.vectors,_=>q(q().dLayers.vectors=_)),C(l,o),ht()}var hl=R('<section class="svelte-1ft2lyp"><!> <div class="rack svelte-1ft2lyp"><canvas class="full svelte-1ft2lyp"></canvas> <!></div> <div class="rack svelte-1ft2lyp"><canvas class="zoom svelte-1ft2lyp"></canvas> <!></div></section>');function yl(l,t){bt(t,!0);let o=St(t,"simTime",15,0);const n=400,v=1200;let c=K(n),u,i,d;function p(g,S){if(u){const O=u.getContext("2d");O.clearRect(0,0,O.canvas.width,O.canvas.height);try{d=g.getAdjustFull(O.canvas.width,O.canvas.height),g.draw(O,d,S)}catch(X){console.log(X)}}}function m(g,S,O){if(i){const X=i.getContext("2d");X.clearRect(0,0,X.canvas.width,X.canvas.height);try{(S===void 0||S.init===0)&&(S=g.getAdjustZoom(X.canvas.width,X.canvas.height)),g.draw(X,S,O)}catch(At){console.log(At)}}}function z(){const g=u.getContext("2d"),S=i.getContext("2d"),O=Math.min(Math.max(.4*r(c),n),v);g.canvas.width=O,g.canvas.height=O,S.canvas.width=O,S.canvas.height=O,w.canvasZWidth=O,w.zAdjust.init===0&&(w.zAdjust=t.pFig.getAdjustZoom(S.canvas.width,S.canvas.height))}function N(){z(),p(t.pFig,w.dLayers),m(t.pFig,w.zAdjust,w.dLayers)}function k(g,S,O){p(g,O),m(g,S,O)}Ds(()=>{z()}),ka(()=>{k(t.pFig,w.zAdjust,w.dLayers)});function f(g){const S=i.getContext("2d");switch(g){case"zoomInit":w.zAdjust=t.pFig.getAdjustZoom(S.canvas.width,S.canvas.height);break;case"zoomIn":w.zAdjust=na(.7,w.zAdjust);break;case"zoomOut":w.zAdjust=na(1.3,w.zAdjust);break;case"moveLeft":w.zAdjust.xMin+=-.2*w.zAdjust.xyDiff;break;case"moveRight":w.zAdjust.xMin+=.2*w.zAdjust.xyDiff;break;case"moveUp":w.zAdjust.yMin+=.2*w.zAdjust.xyDiff;break;case"moveDown":w.zAdjust.yMin+=-.2*w.zAdjust.xyDiff;break;default:console.log(`ERR423: ${g} has no case!`)}m(t.pFig,w.zAdjust,w.dLayers)}const I=3e3,T=10,V=3;let A={timestamp:0,offsetX:0,offsetY:0};function Q(g){g.button===0&&(A.timestamp=Date.now(),A.offsetX=g.offsetX,A.offsetY=g.offsetY)}function lt(g){if(g.button===0)if(Date.now()-A.timestamp<I){const S=Math.abs(A.offsetX-g.offsetX),O=Math.abs(A.offsetY-g.offsetY);if(S<T&&O<T){const[X,At]=$t(g.offsetX,g.offsetY,d);w.zAdjust=us(X,At,w.zAdjust),k(t.pFig,w.zAdjust,w.dLayers)}if(S>T&&O>T){const X=S/O,At=1/X;if(X<V&&At<V){const[kt,Rt]=$t(g.offsetX,g.offsetY,d),[It,qt]=$t(A.offsetX,A.offsetY,d),Ct=i.getContext("2d").canvas.width;w.zAdjust=ds(kt,Rt,It,qt,Ct,Ct),k(t.pFig,w.zAdjust,w.dLayers)}}}else console.log(`Warn205: ignore ${g.offsetX} ${g.offsetY} because too slow`)}function ot(g){if(u){const S=u.getContext("2d");if(g.buttons===1){const O=g.offsetX-A.offsetX,X=g.offsetY-A.offsetY;p(t.pFig,w.dLayers),S.beginPath(),S.rect(A.offsetX,A.offsetY,O,X),S.strokeStyle=ma.mouse,S.stroke()}if(w.dLayers.ruler){const[O,X]=$t(g.offsetX,g.offsetY,d);S.clearRect(5,5,200,25),S.font="15px Arial",S.fillStyle=ma.ruler,S.fillText(`x: ${O.toFixed(4)} y: ${X.toFixed(4)}`,5,20)}}}let ct,_,U;function Z(g){if(g.button===0){const[S,O]=$t(g.offsetX,g.offsetY,w.zAdjust);ct=S,_=O,U=fs(w.zAdjust)}}function Y(g){if(g.buttons===1){const[S,O]=$t(g.offsetX,g.offsetY,U);w.zAdjust=ms(ct,_,S,O,U),m(t.pFig,w.zAdjust,w.dLayers)}else if(w.dLayers.ruler&&i){const S=i.getContext("2d"),[O,X]=$t(g.offsetX,g.offsetY,w.zAdjust);S.clearRect(5,5,200,25),S.font="15px Arial",S.fillStyle=ma.ruler,S.fillText(`x: ${O.toFixed(4)} y: ${X.toFixed(4)}`,5,20)}}function $(g){g.preventDefault(),g.deltaY>0?w.zAdjust=na(.7,w.zAdjust):w.zAdjust=na(1.3,w.zAdjust),m(t.pFig,w.zAdjust,w.dLayers)}var J=hl();La("resize",ns,N);var it=s(J);bl(it,{});var at=a(it,2),G=s(at);E(G,"width",n),E(G,"height",n),G.__mousedown=Q,G.__mouseup=lt,G.__mousemove=ot,ia(G,g=>u=g,()=>u);var ft=a(G,2);fl(ft,{get tMax(){return t.pDefSim.tMax},get tStep(){return t.pDefSim.tStep},get tUpdate(){return t.pDefSim.tUpdate},get simTime(){return o()},set simTime(g){o(g)}}),e(at);var rt=a(at,2),vt=s(rt);E(vt,"width",n),E(vt,"height",n),vt.__mousedown=Z,vt.__mousemove=Y,ia(vt,g=>i=g,()=>i);var Mt=a(vt,2);_l(Mt,{zoomClick:f}),e(rt),e(J),Ns("innerWidth",g=>y(c,g,!0)),La("wheel",vt,$),C(l,J),ht()}Ft(["mousedown","mouseup","mousemove"]);var pl=R("<tr><td> </td><td> </td><td> </td><td><i> </i></td><td><i> </i></td></tr>"),kl=R('<li class="svelte-kwuijv"><input type="checkbox" class="toggle svelte-kwuijv"/> <label class="label svelte-kwuijv"><div class="arrow svelte-kwuijv"></div> </label> <button class="svelte-kwuijv"> </button> <button class="svelte-kwuijv">Export parameters</button> <div class="nested svelte-kwuijv"><article class="svelte-kwuijv"> <strong> </strong> </article> <table class="svelte-kwuijv"><thead class="svelte-kwuijv"><tr><td>Num</td><td>Name</td><td>Value</td><td>Init</td><td>Set?</td></tr></thead><tbody class="svelte-kwuijv"></tbody></table></div></li>'),jl=R('<section class="svelte-kwuijv"><h2 class="svelte-kwuijv">Sub-designs <span class="svelte-kwuijv"> </span></h2> <ol class="svelte-kwuijv"></ol></section>');function wl(l,t){bt(t,!0);const o=yt(()=>Object.keys(t.subD));async function n(k){const f=t.subD[k];Ya(f.partName,Aa(f.dparam),!0);const I=gs(`/${t.pLink[f.partName]}`);Ha(I)}function v(k){const f=t.subD[k].partName,I=t.subD[k].dparam,T=`sub-design parameters of ${f} from ${t.origPartName}`;wa(f,Aa(I),T)}function c(k){let f="[ ";return f+=`${_e(_a(k[0]))}, `,f+=`${_e(_a(k[1]))}, `,f+=`${_e(_a(k[2]))} ]`,f}function u(k){let f="[ ";return f+=`${_e(k[0])}, `,f+=`${_e(k[1])}, `,f+=`${_e(k[2])} ]`,f}function i(k){return k?"Yes":""}var d=jl(),p=s(d),m=a(s(p)),z=s(m);e(m),e(p);var N=a(p,2);Nt(N,20,()=>r(o),k=>k,(k,f)=>{var I=kl(),T=s(I);st(T),_s(T,!1);var V=a(T,2),A=a(s(V));e(V);var Q=a(V,2);Q.__click=()=>n(f);var lt=s(Q);e(Q);var ot=a(Q,2);ot.__click=()=>v(f);var ct=a(ot,2),_=s(ct),U=s(_),Z=a(U),Y=s(Z,!0);e(Z);var $=a(Z);e(_);var J=a(_,2),it=a(s(J));Nt(it,22,()=>Object.keys(t.subD[f].dparam),at=>at,(at,G,ft)=>{var rt=pl();let vt;var Mt=s(rt),g=s(Mt,!0);e(Mt);var S=a(Mt),O=s(S,!0);e(S);var X=a(S),At=s(X,!0);e(X);var kt=a(X),Rt=s(kt),It=s(Rt,!0);e(Rt),e(kt);var qt=a(kt),Tt=s(qt),Ct=s(Tt,!0);e(Tt),e(qt),e(rt),et(ae=>{vt=pt(rt,1,"svelte-kwuijv",null,vt,{changed:t.subD[f].dparam[G].chg}),D(g,r(ft)+1),D(O,G),D(At,t.subD[f].dparam[G].val),D(It,t.subD[f].dparam[G].init),D(Ct,ae)},[()=>i(t.subD[f].dparam[G].chg)]),C(at,rt)}),e(it),e(J),e(ct),e(I),et((at,G,ft)=>{E(T,"id",`cb_${f??""}`),E(V,"for",`cb_${f??""}`),D(A,` ${f??""}`),D(lt,`Go to ${t.pLink[t.subD[f].partName]??""}`),D(U,`${at??""} parameters of `),D(Y,t.subD[f].partName),D($,` with orientation ${G??""} (degree) at position
						${ft??""} (mm)`)},[()=>Object.keys(t.subD[f].dparam).length,()=>c(t.subD[f].orientation),()=>u(t.subD[f].position)]),C(k,I)}),e(N),e(d),et(()=>D(z,`(Number of sub-instances: ${r(o).length??""})`)),C(l,d),ht()}Ft(["click"]);var Dl=R("<button> </button>"),xl=R('<tr class="svelte-1j6aysa"><td class="svelte-1j6aysa"> </td><td class="svelte-1j6aysa"> </td><td class="svelte-1j6aysa">2d- svg</td><td class="svelte-1j6aysa"><button class="svelte-1j6aysa">preview</button></td><td class="svelte-1j6aysa"><button class="svelte-1j6aysa">download</button></td></tr>'),zl=R('<tr class="svelte-1j6aysa"><td class="svelte-1j6aysa"> </td><td class="svelte-1j6aysa"> </td><td class="svelte-1j6aysa">2d- dxf</td><td class="svelte-1j6aysa"><button class="svelte-1j6aysa">preview</button></td><td class="svelte-1j6aysa"><button class="svelte-1j6aysa">download</button></td></tr>'),Sl=R('<!> <section class="svelte-1j6aysa"><h2 class="svelte-1j6aysa">Log</h2> <textarea rows="5" cols="94" readonly="" wrap="soft"></textarea></section> <section class="svelte-1j6aysa"><h2 class="svelte-1j6aysa">2D Drawings : <!> <button>All faces merged</button></h2></section> <!> <section class="svelte-1j6aysa"><h2 class="svelte-1j6aysa">Export</h2> <table class="svelte-1j6aysa"><caption class="svelte-1j6aysa">Output files</caption><thead class="svelte-1j6aysa"><tr class="svelte-1j6aysa"><th class="svelte-1j6aysa">#</th><th class="svelte-1j6aysa">Filename</th><th class="svelte-1j6aysa">Type</th><th class="svelte-1j6aysa">Preview</th><th class="svelte-1j6aysa">Download</th></tr></thead><tbody class="svelte-1j6aysa"><tr class="svelte-1j6aysa"><td class="svelte-1j6aysa">1</td><td class="svelte-1j6aysa"> </td><td class="svelte-1j6aysa">0-params- pxJson</td><td class="svelte-1j6aysa"><button class="svelte-1j6aysa">preview</button></td><td class="svelte-1j6aysa"><button class="svelte-1j6aysa">download</button></td></tr><tr class="svelte-1j6aysa"><td class="svelte-1j6aysa">2</td><td class="svelte-1j6aysa"> </td><td class="svelte-1j6aysa">1-log- txtLog</td><td class="svelte-1j6aysa"><button class="svelte-1j6aysa">preview</button></td><td class="svelte-1j6aysa"><button class="svelte-1j6aysa">download</button></td></tr><!><tr class="svelte-1j6aysa"><td class="svelte-1j6aysa"> </td><td class="svelte-1j6aysa"> </td><td class="svelte-1j6aysa">2d- svg</td><td class="svelte-1j6aysa"><button class="svelte-1j6aysa">preview</button></td><td class="svelte-1j6aysa"><button class="svelte-1j6aysa">download</button></td></tr><!><tr class="svelte-1j6aysa"><td class="svelte-1j6aysa"> </td><td class="svelte-1j6aysa"> </td><td class="svelte-1j6aysa">2d- dxf</td><td class="svelte-1j6aysa"><button class="svelte-1j6aysa">preview</button></td><td class="svelte-1j6aysa"><button class="svelte-1j6aysa">download</button></td></tr><tr class="svelte-1j6aysa"><td class="svelte-1j6aysa"> </td><td class="svelte-1j6aysa"> </td><td class="svelte-1j6aysa">4-pax- paxJson</td><td class="svelte-1j6aysa"><button class="svelte-1j6aysa">preview</button></td><td class="svelte-1j6aysa"><button class="svelte-1j6aysa">download</button></td></tr><tr class="svelte-1j6aysa"><td class="svelte-1j6aysa"> </td><td class="svelte-1j6aysa"> </td><td class="svelte-1j6aysa">5-script- scad</td><td class="svelte-1j6aysa"><button class="svelte-1j6aysa">preview</button></td><td class="svelte-1j6aysa"><button class="svelte-1j6aysa">download</button></td></tr><tr class="svelte-1j6aysa"><td class="svelte-1j6aysa"> </td><td class="svelte-1j6aysa"> </td><td class="svelte-1j6aysa">5-script- jsCad</td><td class="svelte-1j6aysa"><button class="svelte-1j6aysa">preview</button></td><td class="svelte-1j6aysa"><button class="svelte-1j6aysa">download</button></td></tr><tr class="svelte-1j6aysa"><td class="svelte-1j6aysa"> </td><td class="svelte-1j6aysa"> </td><td class="svelte-1j6aysa">5-script- pyFreecad</td><td class="svelte-1j6aysa"><button class="svelte-1j6aysa">preview</button></td><td class="svelte-1j6aysa"><button class="svelte-1j6aysa">download</button></td></tr><tr class="svelte-1j6aysa"><td class="svelte-1j6aysa"> </td><td class="svelte-1j6aysa"> </td><td class="svelte-1j6aysa">6-zip- zip</td><td class="svelte-1j6aysa"></td><td class="svelte-1j6aysa"><button class="svelte-1j6aysa">download</button></td></tr></tbody></table> <dialog id="dBview" class="svelte-1j6aysa"><textarea readonly="" wrap="soft" class="svelte-1j6aysa"></textarea> <button class="bback svelte-1j6aysa">close - back - escape</button></dialog> <!></section>',1);function Ll(l,t){bt(t,!0);const o="ParametrixAll";function n(j){let P=!0;const F=/warn/i;return j.search(F)<0&&(P=!1),P}function v(j,P){let F=P;if(j.length===0)console.log("warn404: Drawing has an empty face list");else{const x=j.slice();x.push(o),x.includes(F)||(F=j[0])}return F}function c(j,P){let F;const x=Object.keys(j),B=v(x,P);return x.includes(B)?F=j[B]:F=ps(j),F}let u=K(0),i=K(o);Ta(()=>{y(i,v(Object.keys(t.fgeom(0,H[t.pDef.partName]).fig),""),!0)});let d=yt(()=>t.fgeom(r(u),H[t.pDef.partName])),p=yt(()=>{const j=new Date().toLocaleTimeString();let P=`Geometry ${t.pDef.partName} computed at ${j}
`;return P+=r(d).logstr,P}),m=yt(()=>Object.keys(r(d).fig)),z=yt(()=>r(d).calcErr),N=yt(()=>n(r(d).logstr)),k=yt(()=>c(r(d).fig,r(i))),f=yt(()=>r(d).sub);function I(j,P){const F=document.createElement("a"),x=URL.createObjectURL(P);F.setAttribute("href",x),F.setAttribute("download",j),F.click(),F.remove(),URL.revokeObjectURL(x)}function T(j,P,F){const x=document.createElement("a"),B="data:"+F+";utf-8,"+encodeURIComponent(P);x.setAttribute("href",B),x.setAttribute("download",j),x.click(),x.remove()}function V(){const j=/[-:]/g,P=/\..*$/;return new Date().toISOString().replace(j,"").replace(P,"").replace("T","_")}async function A(j){const P=/^svg_/,F=/^dxf_/;let x=nt.eSVG,B="all";j.match(P)?(x=nt.eSVG,B=j.replace(P,"")):j.match(F)?(x=nt.eDXF,B=j.replace(F,"")):j==="allsvg"?x=nt.eSVGALL:j==="alldxf"?x=nt.eDXFALL:j==="compute_log"?x=nt.eTXTLOG:j==="pax"?x=nt.ePAX:j==="oscad"?x=nt.eOPENSCAD:j==="ojscad"?x=nt.eJSCAD:j==="freecad"?x=nt.eFREECAD:j==="zip"?x=nt.eZIP:console.log(`err883: downloadExport iExportFace ${j} invalid`);const Ot=hs(x),_t=ks(x),wt=ys(x),dt=t.pDef.partName+"_"+B+"_"+V()+Ot;if(wt){const Pt=await bs(t.fgeom,r(u),H[t.pDef.partName],t.pDef,x);I(dt,Pt)}else{const Pt=Ca(t.fgeom,H[t.pDef.partName],t.pDef,B,x);T(dt,Pt,_t)}}async function Q(){wa(t.pDef.partName,H[t.pDef.partName],"")}let lt,ot=K("");function ct(j){y(ot,j,!0),lt.showModal()}function _(j,P){ct(Ca(t.fgeom,H[t.pDef.partName],t.pDef,j,P))}function U(){lt.close()}var Z=Sl(),Y=zt(Z);ul(Y,{get pDef(){return t.pDef},get pFig(){return r(k)}});var $=a(Y,2),J=a(s($),2);ha(J);let it;e($);var at=a($,2),G=s(at),ft=a(s(G));Nt(ft,16,()=>r(m),j=>j,(j,P)=>{var F=Dl();F.__click=()=>{y(i,P,!0)};var x=s(F,!0);e(F),et(()=>{pt(F,1,Pa({theFace:r(i)===P}),"svelte-1j6aysa"),D(x,P)}),C(j,F)});var rt=a(ft,2);rt.__click=()=>{y(i,o)},e(G),e(at);var vt=a(at,2);yl(vt,{get pDefSim(){return t.pDef.sim},get pFig(){return r(k)},get simTime(){return r(u)},set simTime(j){y(u,j,!0)}});var Mt=a(vt,2),g=a(s(Mt),2),S=a(s(g),2),O=s(S),X=a(s(O)),At=s(X);e(X);var kt=a(X,2),Rt=s(kt);Rt.__click=()=>{ct(Hs(t.pDef.partName,H[t.pDef.partName],""))},e(kt);var It=a(kt),qt=s(It);qt.__click=Q,e(It),e(O);var Tt=a(O),Ct=a(s(Tt)),ae=s(Ct);e(Ct);var Wt=a(Ct,2),Ze=s(Wt);Ze.__click=()=>{_("all",nt.eTXTLOG)},e(Wt);var se=a(Wt),be=s(se);be.__click=async()=>{await A("compute_log")},e(se),e(Tt);var he=a(Tt);Nt(he,18,()=>r(m),j=>j,(j,P,F)=>{var x=xl(),B=s(x),Ot=s(B,!0);e(B);var _t=a(B),wt=s(_t);e(_t);var dt=a(_t,2),Pt=s(dt);Pt.__click=()=>{_(P,nt.eSVG)},e(dt);var Ut=a(dt),gt=s(Ut);gt.__click=async()=>{await A(`svg_${P}`)},e(Ut),e(x),et(()=>{D(Ot,3+r(F)),D(wt,`${t.pDef.partName??""}_${P??""}.svg`)}),C(j,x)});var Bt=a(he),le=s(Bt),Ke=s(le,!0);e(le);var ye=a(le),Ge=s(ye);e(ye);var re=a(ye,2),Be=s(re);Be.__click=()=>{_("all",nt.eSVGALL)},e(re);var pe=a(re),va=s(pe);va.__click=async()=>{await A("allsvg")},e(pe),e(Bt);var ke=a(Bt);Nt(ke,18,()=>r(m),j=>j,(j,P,F)=>{var x=zl(),B=s(x),Ot=s(B,!0);e(B);var _t=a(B),wt=s(_t);e(_t);var dt=a(_t,2),Pt=s(dt);Pt.__click=()=>{_(P,nt.eDXF)},e(dt);var Ut=a(dt),gt=s(Ut);gt.__click=async()=>{await A(`dxf_${P}`)},e(Ut),e(x),et(()=>{D(Ot,4+r(m).length+r(F)),D(wt,`${t.pDef.partName??""}_${P??""}.dxf`)}),C(j,x)});var je=a(ke),Ht=s(je),we=s(Ht,!0);e(Ht);var ne=a(Ht),He=s(ne);e(ne);var oe=a(ne,2),Je=s(oe);Je.__click=()=>{_("all",nt.eDXFALL)},e(oe);var Qe=a(oe),$e=s(Qe);$e.__click=async()=>{await A("alldxf")},e(Qe),e(je);var Yt=a(je),ce=s(Yt),De=s(ce,!0);e(ce);var xe=a(ce),ta=s(xe);e(xe);var ze=a(xe,2),b=s(ze);b.__click=()=>{_("all",nt.ePAX)},e(ze);var h=a(ze),L=s(h);L.__click=async()=>{await A("pax")},e(h),e(Yt);var M=a(Yt),tt=s(M),ut=s(tt,!0);e(tt);var Lt=a(tt),ie=s(Lt);e(Lt);var jt=a(Lt,2),Se=s(jt);Se.__click=()=>{_("all",nt.eOPENSCAD)},e(jt);var Et=a(jt),Le=s(Et);Le.__click=async()=>{await A("oscad")},e(Et),e(M);var mt=a(M),Jt=s(mt),ea=s(Jt,!0);e(Jt);var Xt=a(Jt),W=s(Xt);e(Xt);var Ne=a(Xt,2),ve=s(Ne);ve.__click=()=>{_("all",nt.eJSCAD)},e(Ne);var Ae=a(Ne),Ce=s(Ae);Ce.__click=async()=>{await A("ojscad")},e(Ae),e(mt);var Oe=a(mt),Qt=s(Oe),Pe=s(Qt,!0);e(Qt);var Fe=a(Qt),Me=s(Fe);e(Fe);var Re=a(Fe,2),ua=s(Re);ua.__click=()=>{_("all",nt.eFREECAD)},e(Re);var aa=a(Re),ue=s(aa);ue.__click=async()=>{await A("freecad")},e(aa),e(Oe);var Te=a(Oe),Ue=s(Te),de=s(Ue,!0);e(Ue);var fe=a(Ue),da=s(fe);e(fe);var me=a(fe,3),fa=s(me);fa.__click=async()=>{await A("zip")},e(me),e(Te),e(S),e(g);var Vt=a(g,2),Ie=s(Vt);ha(Ie);var qe=a(Ie,2);qe.__click=U,e(Vt),ia(Vt,j=>lt=j,()=>lt);var sa=a(Vt,2);wl(sa,{get subD(){return r(f)},get origPartName(){return t.pDef.partName},get pLink(){return t.pLink}}),e(Mt),et(()=>{ca(J,r(p)),it=pt(J,1,"svelte-1j6aysa",null,it,{colorErr:r(z),colorWarn:r(N)}),pt(rt,1,Pa({theFace:r(i)===o}),"svelte-1j6aysa"),D(At,`px_${t.pDef.partName??""}.json`),D(ae,`${t.pDef.partName??""}_all.log`),D(Ke,3+r(m).length),D(Ge,`${t.pDef.partName??""}_all.svg`),D(we,4+2*r(m).length),D(He,`${t.pDef.partName??""}_all.dxf`),D(De,5+2*r(m).length),D(ta,`${t.pDef.partName??""}_all.pax.json`),D(ut,6+2*r(m).length),D(ie,`${t.pDef.partName??""}_all_noarc_openscad.scad`),D(ea,7+2*r(m).length),D(W,`${t.pDef.partName??""}_all_noarc_jscad.js`),D(Pe,8+2*r(m).length),D(Me,`${t.pDef.partName??""}_all_freecad.py`),D(de,9+2*r(m).length),D(da,`${t.pDef.partName??""}_all.zip`),ca(Ie,r(ot))}),C(l,Z),ht()}Ft(["click"]);var Nl=R('<h1 class="svelte-8qea59"> </h1> <article class="svelte-8qea59"> </article> <!> <!>',1);function Al(l,t){bt(t,!0),Ps(t.pageDef);var o=Nl(),n=zt(o),v=s(n,!0);e(n);var c=a(n,2),u=s(c);e(c);var i=a(c,2);Ts(i,{get pDef(){return t.pageDef.pDef}});var d=a(i,2);Ll(d,{get pDef(){return t.pageDef.pDef},get fgeom(){return t.pageDef.pGeom},get pLink(){return t.pLink}}),et(()=>{D(v,t.pageDef.pTitle),D(u,`[${t.pageDef.pDef.partName??""}]: ${t.pageDef.pDescription??""}`)}),C(l,o),ht()}function Wl(l,t){bt(t,!0),Al(l,{get pageDef(){return t.data.pageDef},get pLink(){return t.data.allLink}}),ht()}export{Wl as component,Xl as universal};
