import{a as xa,b as Ra}from"../chunks/BSaPVNLj.js";import{H as Ua,a as Sa,g as Ia}from"../chunks/B3ETeS_C.js";import"../chunks/NZTpNUN0.js";import{D as Qe,aN as fa,a2 as Xa,j as Wa,aO as Ya,aP as qa,H as Va,aQ as Za,n as Aa,a3 as Ca,aR as Ea,aS as Ka,ab as j,P as o,aA as Ga,aa as ae,aT as Rt,p as ft,an as _a,a as Tt,b as F,c as _t,f as U,d as l,r as a,t as et,s,am as H,ao as bt,e as w,aq as zt,u as ma,aU as Be,ap as ka,aV as ua,aW as ja,aX as Ba}from"../chunks/CGdBQPRq.js";import{s as Z,e as Ot,n as st,o as $e,q as Ha,t as Ja,u as Qa,w as $a,x as ba,P as He,y as pa,z as Je,A as te,B as ts,C as es,D as as,F as ss,G as ca,H as ls,I as ha,f as be,r as ia,J as nt,K as ns,L as ya,M as rs,N as os,O as cs,Q as is}from"../chunks/Ry1Xs9JU.js";import{p as Nt,i as ee,b as ta}from"../chunks/BMdDwoOW.js";import{b as ea}from"../chunks/B36O1w6P.js";import{s as vs}from"../chunks/pm0gKOHf.js";import{p as wa,i as ds}from"../chunks/ReJSzXLn.js";import{a as us,o as fs}from"../chunks/BJ0Rqg4s.js";import"../chunks/jFB1Qau7.js";function Oa(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var c=e.length;for(t=0;t<c;t++)e[t]&&(n=Oa(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function _s(){for(var e,t,n=0,r="",c=arguments.length;n<c;n++)(e=arguments[n])&&(t=Oa(e))&&(r&&(r+=" "),r+=t);return r}function Da(e){return typeof e=="object"?_s(e):e??""}const za=[...` 	
\r\fÂ \v\uFEFF`];function ms(e,t,n){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),n){for(var c in n)if(n[c])r=r?r+" "+c:c;else if(r.length)for(var i=c.length,d=0;(d=r.indexOf(c,d))>=0;){var v=d+i;(d===0||za.includes(r[d-1]))&&(v===r.length||za.includes(r[v]))?r=(d===0?"":r.substring(0,d))+r.substring(v+1):d=v}}return r===""?null:r}function jt(e,t,n,r,c,i){var d=e.__className;if(Qe||d!==n||d===void 0){var v=ms(n,r,i);(!Qe||v!==e.getAttribute("class"))&&(v==null?e.removeAttribute("class"):e.className=v),e.__className=n}else if(i&&c!==i)for(var u in i){var p=!!i[u];(c==null||p!==!!c[u])&&e.classList.toggle(u,p)}return i}function Pa(e,t,n=!1){if(e.multiple){if(t==null)return;if(!Wa(t))return Ya();for(var r of e.options)r.selected=t.includes(Ie(r));return}for(r of e.options){var c=Ie(r);if(qa(c,t)){r.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function bs(e){var t=new MutationObserver(()=>{Pa(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Va(()=>{t.disconnect()})}function La(e,t,n=t){var r=!0;fa(e,"change",c=>{var i=c?"[selected]":":checked",d;if(e.multiple)d=[].map.call(e.querySelectorAll(i),Ie);else{var v=e.querySelector(i)??e.querySelector("option:not([disabled])");d=v&&Ie(v)}n(d)}),Xa(()=>{var c=t();if(Pa(e,c,r),r&&c===void 0){var i=e.querySelector(":checked");i!==null&&(c=Ie(i),n(c))}e.__value=c,r=!1}),bs(e)}function Ie(e){return"__value"in e?e.__value:e.value}function ge(e,t,n=t){var r=Za();fa(e,"input",c=>{var i=c?e.defaultValue:e.value;if(i=va(e)?da(i):i,n(i),r&&i!==(i=t())){var d=e.selectionStart,v=e.selectionEnd;e.value=i??"",v!==null&&(e.selectionStart=d,e.selectionEnd=Math.min(v,e.value.length))}}),(Qe&&e.defaultValue!==e.value||Aa(t)==null&&e.value)&&n(va(e)?da(e.value):e.value),Ca(()=>{var c=t();va(e)&&c===da(e.value)||e.type==="date"&&!c&&!e.value||c!==e.value&&(e.value=c??"")})}function Lt(e,t,n=t){fa(e,"change",r=>{var c=r?e.defaultChecked:e.checked;n(c)}),(Qe&&e.defaultChecked!==e.checked||Aa(t)==null)&&n(e.checked),Ca(()=>{var r=t();e.checked=!!r})}function va(e){var t=e.type;return t==="number"||t==="range"}function da(e){return e===""?null:+e}function gs(e,t){Ea(window,["resize"],()=>Ka(()=>t(window[e])))}function xs(e){var t=Ga(0);return function(){return arguments.length===1?(j(t,o(t)+1),arguments[0]):(o(t),e())}}function ks(e,t){throw new Ua(e,t)}new TextEncoder;function js({params:e}){const t=e.design;if(Object.keys(xa).includes(t))return{pageDef:xa[t],allLink:Ra};ks(404,"Design undefined!")}const pn=Object.freeze(Object.defineProperty({__proto__:null,load:js},Symbol.toStringTag,{value:"Module"})),J=ae({});function Fa(e,t,n){if(Object.keys(J).includes(e)){const c=J[e],i=Object.keys(c);for(const d of Object.keys(t))i.includes(d)?n&&(c[d]=t[d]):c[d]=t[d];J[e]=c}else J[e]=t}function ps(e){const t=e.pDef.partName,n={};for(const r of e.pDef.params)n[r.name]=r.init;Fa(t,n,!1)}function hs(e,t){t(!1)}var ys=U('<aside class="backdrop svelte-sjxf1e"><div class="dialog svelte-sjxf1e"><button class="svelte-sjxf1e"><img/></button></div></aside>');function Ma(e,t){ft(t,!0);let n=Nt(t,"modalOpen",15);var r=_a(),c=Tt(r);{var i=d=>{var v=ys(),u=l(v),p=l(u);p.__click=[hs,n];var f=l(p);a(p),a(u),a(v),et(()=>{Z(f,"src",t.svgPath),Z(f,"alt",t.svgPath)}),F(d,v)};ee(c,d=>{n()&&d(i)})}F(e,r),_t()}Rt(["click"]);var ws=(e,t,n)=>t(n),Ds=U('<button class="svelte-fxmnfh"><img class="svelte-fxmnfh"/></button>'),zs=U('<section class="svelte-fxmnfh"><!> <!></section>');function Ls(e,t){ft(t,!0);function n(f){const S=[];for(const N of Object.values(f.paramSvg))S.includes(N)||S.push(N);return S}let r=H(!1),c=H(""),i=bt(()=>n(t.pDef).map(f=>`${ea}/pgdsvg/${f}`));function d(f){j(c,f,!0),j(r,!0)}var v=zs(),u=l(v);Ma(u,{get svgPath(){return o(c)},get modalOpen(){return o(r)},set modalOpen(f){j(r,f,!0)}});var p=s(u,2);Ot(p,16,()=>o(i),f=>f,(f,S)=>{var N=Ds();N.__click=[ws,d,S];var x=l(N);a(N),et(()=>{Z(x,"src",S),Z(x,"alt",S)}),F(f,N)}),a(v),F(e,v),_t()}Rt(["click"]);function Ns(e,t){t(!1)}function Ss(e,t,n){t.okFunc(),n(!1)}var As=U('<aside class="backdrop svelte-weruk7"><div><article class="question svelte-weruk7"><!></article> <footer class="svelte-weruk7"><button class="cancel svelte-weruk7">Cancel</button> <button class="ok svelte-weruk7"> </button></footer></div></aside>');function Ue(e,t){ft(t,!0);let n=Nt(t,"okName",3,"Ok"),r=Nt(t,"modalOpen",15),c=Nt(t,"sizeLarge",3,!1);var i=_a(),d=Tt(i);{var v=u=>{var p=As(),f=l(p);let S;var N=l(f),x=l(N);vs(x,()=>t.children),a(N);var _=s(N,2),I=l(_);I.__click=[Ns,r];var T=s(I,2);T.__click=[Ss,t,r];var $=l(T,!0);a(T),a(_),a(f),a(p),et(M=>{S=jt(f,1,"dialog svelte-weruk7",null,S,M),w($,n())},[()=>({sizeLarge:c()})]),F(u,p)};ee(d,u=>{r()&&u(v)})}F(e,i),_t()}Rt(["click"]);function Cs(e,t,n,r){for(const c of t())o(n)[c]=o(r)}var Os=(e,t)=>{j(t,!0)},Ps=U('<p class="diagItem svelte-12dj9tj"> </p>'),Fs=U('<p class="diagTitle svelte-12dj9tj">Do you really want to delete the following localStorage keys?</p> <!>',1),Ms=(e,t,n)=>t(n),Ts=U('<tr class="svelte-12dj9tj"><td><input type="checkbox"/></td><td class="svelte-12dj9tj"><button class="svelte-12dj9tj"> </button></td><td> </td></tr>'),Rs=U('<div class="deleteKeys svelte-12dj9tj"><button class="svelte-12dj9tj">Delete</button> <!> <table class="svelte-12dj9tj"><thead class="svelte-12dj9tj"><tr><td>Delete</td><td>Key name</td><td>Last modification</td></tr><tr><td><input type="checkbox"/></td><td class="instruction">delete all</td><td></td></tr></thead><tbody class="svelte-12dj9tj"></tbody></table></div>');function Ta(e,t){ft(t,!0);let n=Nt(t,"storeName",15),r=Nt(t,"localKeys",15),c=H(ae({})),i=H(!1),d=H(!1);function v(){let L=[];const y=new RegExp(`^${t.pageName}_`);return L=Object.keys(window.localStorage).filter(E=>y.test(E)).map(E=>E.replace(y,"")),L.sort(),L}r(v());function u(L){n(L)}function p(L){let y={};for(const q of L){let E="";const Q=`${t.pageName}_${q}`,K=window.localStorage.getItem(Q);K!==null&&(E=JSON.parse(K).lastModif),y[q]=E}return y}let f=bt(()=>p(r()));function S(L){let y={};for(const q of L)y[q]=!1;return y}j(c,S(r()),!0);function N(){for(const L of r())if(o(c)[L]){const y=`${t.pageName}_${L}`;window.localStorage.removeItem(y)}j(i,!1),r(v())}var x=Rs(),_=l(x);_.__click=[Os,d];var I=s(_,2);Ue(I,{okName:"Confirm",okFunc:N,get modalOpen(){return o(d)},set modalOpen(L){j(d,L,!0)},children:(L,y)=>{var q=Fs(),E=s(Tt(q),2);Ot(E,16,r,Q=>Q,(Q,K)=>{var at=_a(),vt=Tt(at);{var lt=G=>{var ut=Ps(),gt=l(ut,!0);a(ut),et(()=>w(gt,K)),F(G,ut)};ee(vt,G=>{o(c)[K]&&G(lt)})}F(Q,at)}),F(L,q)},$$slots:{default:!0}});var T=s(I,2),$=l(T),M=s(l($)),B=l(M),rt=l(B);st(rt),rt.__change=[Cs,r,c,i],a(B),zt(2),a(M),a($);var ot=s($);Ot(ot,20,r,L=>L,(L,y)=>{var q=Ts(),E=l(q),Q=l(E);st(Q),a(E);var K=s(E),at=l(K);at.__click=[Ms,u,y];var vt=l(at,!0);a(at),a(K);var lt=s(K),G=l(lt,!0);a(lt),a(q),et(()=>{w(vt,y),w(G,o(f)[y])}),Lt(Q,()=>o(c)[y],ut=>o(c)[y]=ut),F(L,q)}),a(ot),a(T),a(x),Lt(rt,()=>o(i),L=>j(i,L)),F(e,x),_t()}Rt(["click","change"]);var Us=U('<p class="warnMsg svelte-1rkdwo"> </p>'),Is=U('<!> <div class="svelte-1rkdwo"><label for="storName" class="svelte-1rkdwo">Give a name to your parameter-set:</label> <input type="text" id="storName" required minlength="4" maxlength="30" size="32" class="svelte-1rkdwo"/> <!></div>',1);function Xs(e,t){ft(t,!0);let n=Nt(t,"storeName",15),r=H(ae([]));function c(N){const x=/[-:]/g,_=/\..*$/,I=new Date().toISOString().replace(x,"").replace(_,"").replace("T","_");return`${N}_${I}`}n(c(t.pageName));let i=bt(()=>o(r).includes(n()));var d=Is(),v=Tt(d);Ta(v,{get pageName(){return t.pageName},get storeName(){return n()},set storeName(N){n(N)},get localKeys(){return o(r)},set localKeys(N){j(r,N,!0)}});var u=s(v,2),p=s(l(u),2);st(p);var f=s(p,2);{var S=N=>{var x=Us(),_=l(x);a(x),et(()=>w(_,`Warning: name ${n()??""} already used`)),F(N,x)};ee(f,N=>{o(i)&&N(S)})}a(u),ge(p,n),F(e,d),_t()}var Ws=U('<!> <div class="svelte-1ozd0ey"><label for="storName" class="svelte-1ozd0ey">Select a parameter-set:</label> <input type="text" id="storName" readonly="" minlength="4" maxlength="30" size="32" class="svelte-1ozd0ey"/></div>',1);function Ys(e,t){ft(t,!0);let n=Nt(t,"storeName",15),r=H(ae([]));function c(p){let f=n();return!p.includes(f)&&(p.length>0?f=p[0]:f=""),f}ma(()=>{n(c(o(r)))});var i=Ws(),d=Tt(i);Ta(d,{get pageName(){return t.pageName},get storeName(){return n()},set storeName(p){n(p)},get localKeys(){return o(r)},set localKeys(p){j(r,p,!0)}});var v=s(d,2),u=s(l(v),2);st(u),a(v),et(()=>$e(u,n())),F(e,i),_t()}const h=ae({dLayers:Ja(),zAdjust:Ha(),canvasZWidth:0});var qs=U('<canvas class="mini svelte-z8e4tz"></canvas>');function Na(e,t){ft(t,!0);const n=200,r=.6;let c;function i(u,p,f,S){const N=Qa(S);N.ruler=!1;let x;if(c){const _=c.getContext("2d");_.clearRect(0,0,_.canvas.width,_.canvas.height);const I=_.canvas.width;try{t.full?x=u.getAdjustFull(_.canvas.width,_.canvas.height):x=$a(f,I,p),u.draw(_,x,N)}catch(T){console.log(T)}}}ma(()=>{i(t.pFig,h.zAdjust,h.canvasZWidth,h.dLayers)});function d(u){const p=u.offsetX,f=u.offsetY,S=c.getContext("2d"),N=S.canvas.width/2,x=S.canvas.height/2;if(u.button===0){let _=1;p>N&&(_+=1*r),f>x&&(_+=2*r),S.canvas.width=_*n,S.canvas.height=_*n,i(t.pFig,h.zAdjust,h.canvasZWidth,h.dLayers)}}var v=qs();Z(v,"width",n),Z(v,"height",n),v.__click=d,ta(v,u=>c=u,()=>c),F(e,v),_t()}Rt(["click"]);function Vs(e,t){const n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",e),n.click(),n.remove()}function Zs(e,t,n){const r=/[-:]/g,c=/\..*$/,i=new Date().toISOString().replace(r,"").replace(c,"").replace("T","_");return ba(i,e,t,n)}function ga(e,t,n){const r=/[-:]/g,c=/\..*$/,i=new Date().toISOString().replace(r,"").replace(c,"").replace("T","_"),d=`px_${e}_${i}.json`,v=ba(i,e,t,n);Vs(d,v)}function Es(e,t,n){const r=new URL(e),c=2e3;let i=r.toString().length;for(const d of Object.keys(t)){const v=t[d].toString(),u=2+d.length+v.length;r.searchParams.append(encodeURIComponent(d),encodeURIComponent(v)),i+=u}return i>=c&&console.log(`warn547: generateUrl: strLength ${i} larger than strLengthLimit ${c}`),r.toString()}function Ks(e,t){if(e.target){const n=e.target.files;n&&t(n[0])}}function Gs(e,t,n,r){j(t,n(),!0),j(r,!0)}function Bs(e,t){j(t,!0)}function Hs(e,t){j(t,!0)}function Js(e,t){j(t,!1)}var Qs=(e,t)=>{j(t,!0)},$s=(e,t)=>{j(t,!0)},tl=(e,t,n)=>t(o(n).name),el=U('<input type="number" class="input-number svelte-jonk14"/> <input type="range" class="svelte-jonk14"/>',1),al=U("<option> </option>"),sl=U("<select></select>"),ll=U("<option> </option>"),nl=U("<select></select>"),rl=U('<tr><td class="svelte-jonk14"> </td><td class="svelte-jonk14"><button class="svelte-jonk14"> </button></td><td class="svelte-jonk14"><!></td><td> </td><td> </td><td class="svelte-jonk14"> </td><td class="svelte-jonk14"> </td><td> </td></tr>'),ol=U('<tbody class="svelte-jonk14"><tr class="separator svelte-jonk14"><td class="svelte-jonk14"> </td><td class="svelte-jonk14"> </td><td class="svelte-jonk14"><label class="svelte-jonk14"><input type="checkbox" class="svelte-jonk14"/> <span class="svelte-jonk14"></span></label></td></tr></tbody> <tbody></tbody>',1),cl=(e,t)=>{j(t,!0)},il=U('<p>Copy this URL and send it to your friends!</p> <p class="cUrl svelte-jonk14"> </p>',1),vl=U('<section class="svelte-jonk14"><h2 class="svelte-jonk14">Parameters</h2> <main class="svelte-jonk14"><label for="loadFParams" class="fileUpload svelte-jonk14">Load Params from File</label> <input id="loadFParams" type="file" accept="text/plain, application/json" class="svelte-jonk14"/> <button class="svelte-jonk14">Set Params Default</button> <button class="svelte-jonk14">Load Params from localStorage</button> <!> <!> <textarea rows="3" cols="80" readonly="" wrap="soft"></textarea> <table class="svelte-jonk14"><thead class="svelte-jonk14"><tr class="svelte-jonk14"><td class="svelte-jonk14">&#35;</td><td class="svelte-jonk14">Parameter name</td><td class="svelte-jonk14">Value<span class="svelte-jonk14"><button class="svelte-jonk14">&minus;</button><button class="svelte-jonk14">+</button></span></td><td>Unit</td><td>Default</td><td class="svelte-jonk14">Min</td><td class="svelte-jonk14">Max</td><td>Step</td></tr></thead><!></table> <div class="comment svelte-jonk14"><label for="inComment">Comment:</label> <input type="text" id="inComment" maxlength="150"/></div> <button class="svelte-jonk14">Save Parameters to File</button> <button class="svelte-jonk14">Save Parameters as URL</button> <button class="svelte-jonk14">Save Parameters to localStorage</button> <!> <!></main> <!> <button class="side-img svelte-jonk14"><img class="svelte-jonk14"/></button> <div class="mini-canvas svelte-jonk14"><!></div> <div class="mini-canvas svelte-jonk14"><!></div></section>');function dl(e,t){ft(t,!0);let n=H(""),r=H(!1),c=H(""),i=H(!1),d=H(!1),v=H(!1),u=H(!1),p=H(!1),f=H(""),S=H(""),N=H(""),x=H(ae(K(t.pDef.params[0].name))),_=H(!1),I=H(ae(lt(vt(t.pDef.params))));Sa(()=>{j(x,K(t.pDef.params[0].name),!0),j(I,lt(vt(t.pDef.params)),!0)});function T(g,k){let D="",R=!1;g!==t.pDef.partName&&(D+=`warn361: read partName: '${g}'  expected partName: '${t.pDef.partName}'
`,R=!0);let tt=0,ct=0,Ft=0;const ue=[];for(const kt of t.pDef.params)ue.push(kt.name),Object.hasOwn(k,kt.name)?(tt+=1,J[t.pDef.partName][kt.name]===k[kt.name]?Ft+=1:J[t.pDef.partName][kt.name]=k[kt.name]):ct+=1;let ht=0;for(const kt of Object.keys(k))ue.includes(kt)||(ht+=1,D+=`warn363: parameter ${kt} not in the scope of the design (${ht})
`);const Kt=ht>0,Gt=new Date().toLocaleTimeString();return D+=`Params loaded at ${Gt} :`,D+=` def-nb: ${Object.keys(t.pDef.params).length}`,D+=`, cover-nb: ${tt}, uncover-nb: ${ct}
`,D+=` load-nb: ${Object.keys(k).length}`,D+=`, equal-nb: ${Ft}, changed-nb: ${tt-Ft}`,D+=`, out-of-scope: ${ht}`,[D,R||Kt]}async function $(g){try{const k=await fetch(g);if(!k.ok)throw`err627: error while fetching ${g}`;const D=await k.text(),[R]=pa(D);(tt=>{var ct=Be(tt,2);j(c,ct[0],!0),j(i,ct[1],!0)})(T(R.partName,R.pVal)),j(n,R.comment,!0)}catch(k){let D=`err223: error by fetching px file
`;D+=k,j(c,D,!0),j(i,!0)}}async function M(){{const g=new URLSearchParams(wa.url.search),k="pxUrl";if(g.has(k)){const R=g.get(k);g.delete(k),R?await $(R):(j(c,`err123: error by parsing URL-search-params
`),j(i,!0))}const D={};for(const[R,tt]of g){const ct=Number(tt);isNaN(ct)||(D[R]=ct)}Object.keys(D).length>0&&(R=>{var tt=Be(R,2);j(c,tt[0],!0),j(i,tt[1],!0)})(T(t.pDef.partName,D))}}M();function B(g){try{const[k]=pa(g);(D=>{var R=Be(D,2);j(c,R[0],!0),j(i,R[1],!0)})(T(k.partName,k.pVal)),j(n,k.comment,!0)}catch(k){let D=`err723: error by parsing parameter file
`;D+=k,j(c,D,!0),j(i,!0)}}async function rt(g){const k=await g.text();B(k)}function ot(){ga(t.pDef.partName,J[t.pDef.partName],o(n))}function L(){const g={};for(const k of t.pDef.params)g[k.name]=k.init;(k=>{var D=Be(k,2);j(c,D[0],!0),j(i,D[1],!0)})(T(t.pDef.partName,g))}function y(){if(o(f)!==void 0&&o(f)!==""){const g=`${t.pDef.partName}_${o(f)}`;{const k=window.localStorage.getItem(g);k===null?(j(c,`Warn157: localStorage key ${g} is null`),j(i,!0)):B(k)}}else j(c,"Warn239: No valid name for loading from localStorage!"),j(i,!0)}function q(){if(o(S)!==void 0&&o(S)!==""){const g=`${t.pDef.partName}_${o(S)}`,k=/\..*$/,D=new Date().toISOString().replace(k,""),R=ba(D,t.pDef.partName,J[t.pDef.partName],o(n));window.localStorage.setItem(g,R)}else console.log("Warn639: No valid name for writing to localStorage!")}function E(){return Es(wa.url.href,J[t.pDef.partName]).toString()}function Q(){}function K(g){let k=`${ea}/pgdsvg/default_param_blank.svg`;return Object.keys(t.pDef.paramSvg).includes(g)&&(k=`${ea}/pgdsvg/${t.pDef.paramSvg[g]}`),k}function at(g){j(x,K(g),!0)}function vt(g){const k=[];let R={sectionName:"main",sectionID:"g0main",sectionVisCollapse:!1,params:[]},tt=0;for(const ct of g)ct.pType===He.eSectionSeparator?(k.push(R),tt+=1,R={sectionName:ct.name,sectionID:`g${tt}${ct.name}`,sectionVisCollapse:!0,params:[]}):R.params.push(ct);return k.push(R),k}function lt(g){const k={};for(const D of g)k[D.sectionID]=D.sectionVisCollapse;return k}let G=bt(()=>vt(t.pDef.params)),ut=bt(()=>o(r)?2:4),gt=bt(()=>o(r)?2:3),mt=bt(()=>o(r)?50:70);var pt=vl(),m=s(l(pt),2),z=s(l(m),2);z.__change=[Ks,rt];var C=s(z,2);C.__click=[Qs,d];var Y=s(C,2);Y.__click=[$s,v];var xt=s(Y,2);Ue(xt,{okName:"Overwrite Parameters",okFunc:L,get modalOpen(){return o(d)},set modalOpen(g){j(d,g,!0)},children:(g,k)=>{zt();var D=ka("Load the default parameters ?");F(g,D)},$$slots:{default:!0}});var Ut=s(xt,2);Ue(Ut,{okName:"Load Parameters",okFunc:y,get modalOpen(){return o(v)},set modalOpen(g){j(v,g,!0)},children:(g,k)=>{Ys(g,{get pageName(){return t.pDef.partName},get storeName(){return o(f)},set storeName(D){j(f,D,!0)}})},$$slots:{default:!0}});var St=s(Ut,2);ua(St);let Vt;var At=s(St,2),Pt=l(At),Yt=l(Pt),qt=s(l(Yt),2),se=s(l(qt)),xe=l(se);xe.__click=[Hs,r];var aa=s(xe);aa.__click=[Js,r],a(se),a(qt);var ke=s(qt);let le;var ne=s(ke);let Xe;var je=s(ne,3);let We;a(Yt),a(Pt);var pe=s(Pt);Ot(pe,19,()=>o(G),g=>g.sectionName,(g,k,D)=>{var R=ol(),tt=Tt(R),ct=l(tt),Ft=l(ct),ue=l(Ft,!0);a(Ft);var ht=s(Ft),Kt=l(ht,!0);a(ht);var Gt=s(ht),Bt=l(Gt),kt=l(Bt);st(kt),zt(2),a(Bt),a(Gt),a(ct),a(tt);var Ht=s(tt,2);let Ze;Ot(Ht,23,()=>o(k).params,It=>It.name,(It,W,ze)=>{var Zt=rl();let Ee;var Jt=l(Zt),la=l(Jt);a(Jt);var Qt=s(Jt),Le=l(Qt);Le.__click=[tl,at,W];var Ke=l(Le,!0);a(Le),a(Qt);var Ne=s(Qt),Se=l(Ne);{var Ae=yt=>{var Xt=el(),Ct=Tt(Xt);st(Ct);var Mt=s(Ct,2);st(Mt),et(()=>{Z(Ct,"min",o(W).min),Z(Ct,"max",o(W).max),Z(Ct,"step",o(W).step),Z(Mt,"min",o(W).min),Z(Mt,"max",o(W).max),Z(Mt,"step",o(W).step)}),ge(Ct,()=>J[t.pDef.partName][o(W).name],b=>J[t.pDef.partName][o(W).name]=b),ge(Mt,()=>J[t.pDef.partName][o(W).name],b=>J[t.pDef.partName][o(W).name]=b),F(yt,Xt)},na=(yt,Xt)=>{{var Ct=b=>{var O=sl();Ot(O,22,()=>["Off","On"],P=>P,(P,A,V)=>{var it=al(),dt=l(it,!0);a(it);var Wt={};et(()=>{w(dt,A),Wt!==(Wt=o(V))&&(it.value=(it.__value=o(V))??"")}),F(P,it)}),a(O),La(O,()=>J[t.pDef.partName][o(W).name],P=>J[t.pDef.partName][o(W).name]=P),F(b,O)},Mt=(b,O)=>{{var P=V=>{var it=nl();Ot(it,22,()=>o(W).dropdown,dt=>dt,(dt,Wt,wt)=>{var Dt=ll(),$t=l(Dt,!0);a(Dt);var me={};et(()=>{w($t,Wt),me!==(me=o(wt))&&(Dt.value=(Dt.__value=o(wt))??"")}),F(dt,Dt)}),a(it),La(it,()=>J[t.pDef.partName][o(W).name],dt=>J[t.pDef.partName][o(W).name]=dt),F(V,it)},A=V=>{var it=ka("unknown");F(V,it)};ee(b,V=>{o(W).pType===He.eDropdown?V(P):V(A,!1)},O)}};ee(yt,b=>{o(W).pType===He.eCheckbox?b(Ct):b(Mt,!1)},Xt)}};ee(Se,yt=>{o(W).pType===He.eNumber?yt(Ae):yt(na,!1)})}a(Ne);var Et=s(Ne);let Ge;var Ce=l(Et,!0);a(Et);var fe=s(Et);let Oe;var ra=l(fe,!0);a(fe);var _e=s(fe),Pe=l(_e,!0);a(_e);var Fe=s(_e),Me=l(Fe,!0);a(Fe);var Te=s(Fe);let Re;var oa=l(Te,!0);a(Te),a(Zt),et((yt,Xt,Ct,Mt)=>{Ee=jt(Zt,1,"svelte-jonk14",null,Ee,yt),w(la,`${o(D)+1}.${o(ze)+1}`),w(Ke,o(W).name),Ge=jt(Et,1,"svelte-jonk14",null,Ge,Xt),w(Ce,o(W).unit),Oe=jt(fe,1,"svelte-jonk14",null,Oe,Ct),w(ra,o(W).init),w(Pe,o(W).min),w(Me,o(W).max),Re=jt(Te,1,"svelte-jonk14",null,Re,Mt),w(oa,o(W).step)},[()=>({changed:J[t.pDef.partName][o(W).name]!==o(W).init}),()=>({hideColumn:o(r)}),()=>({hideColumn:o(r)}),()=>({hideColumn:o(r)})]),F(It,Zt)}),a(Ht),et(It=>{w(ue,o(D)+1),Z(ht,"colspan",o(ut)),w(Kt,o(k).sectionName),Z(Gt,"colspan",o(gt)),Ze=jt(Ht,1,"svelte-jonk14",null,Ze,It)},[()=>({collaps:o(I)[o(k).sectionID]})]),Lt(kt,()=>o(I)[o(k).sectionID],It=>o(I)[o(k).sectionID]=It),F(g,R)}),a(At);var he=s(At,2),re=s(l(he),2);st(re),a(he);var Ye=s(he,2);Ye.__click=ot;var ye=s(Ye,2);ye.__click=[Gs,N,E,u];var oe=s(ye,2);oe.__click=[cl,p];var ce=s(oe,2);Ue(ce,{okName:"Done",okFunc:Q,sizeLarge:!0,get modalOpen(){return o(u)},set modalOpen(g){j(u,g,!0)},children:(g,k)=>{var D=il(),R=s(Tt(D),2),tt=l(R,!0);a(R),et(()=>w(tt,o(N))),F(g,D)},$$slots:{default:!0}});var sa=s(ce,2);Ue(sa,{okName:"Save into localStorage",okFunc:q,get modalOpen(){return o(p)},set modalOpen(g){j(p,g,!0)},children:(g,k)=>{Xs(g,{get pageName(){return t.pDef.partName},get storeName(){return o(S)},set storeName(D){j(S,D,!0)}})},$$slots:{default:!0}}),a(m);var ie=s(m,2);Ma(ie,{get svgPath(){return o(x)},get modalOpen(){return o(_)},set modalOpen(g){j(_,g,!0)}});var ve=s(ie,2);ve.__click=[Bs,_];var de=l(ve);a(ve);var we=s(ve,2),qe=l(we);Na(qe,{get pFig(){return t.pFig},full:!0}),a(we);var Ve=s(we,2),De=l(Ve);Na(De,{get pFig(){return t.pFig},full:!1}),a(Ve),a(pt),et((g,k,D,R)=>{$e(St,o(c)),Vt=jt(St,1,"svelte-jonk14",null,Vt,g),le=jt(ke,1,"svelte-jonk14",null,le,k),Xe=jt(ne,1,"svelte-jonk14",null,Xe,D),We=jt(je,1,"svelte-jonk14",null,We,R),Z(re,"size",o(mt)),Z(de,"src",o(x)),Z(de,"alt",o(x))},[()=>({colorWarn:o(i)}),()=>({hideColumn:o(r)}),()=>({hideColumn:o(r)}),()=>({hideColumn:o(r)})]),ge(re,()=>o(n),g=>j(n,g)),F(e,pt),_t()}Rt(["change","click"]);var ul=U('<nav class="svelte-1lpxlzz"><button class="svelte-1lpxlzz">0</button> <button class="svelte-1lpxlzz">&lt-</button> <button class="svelte-1lpxlzz">|&lt</button> <button class="svelte-1lpxlzz">||</button> <button class="svelte-1lpxlzz">&gt|</button> <button class="svelte-1lpxlzz">-&gt</button> <input type="range" min="0" class="svelte-1lpxlzz"/> <input type="number" min="0" class="svelte-1lpxlzz"/></nav>');function fl(e,t){ft(t,!0);let n=Nt(t,"tMax",3,10),r=Nt(t,"tStep",3,.1),c=Nt(t,"tUpdate",3,500),i=Nt(t,"simTime",15,0),d=null,v=0,u;const p=4;function f(){d!==null&&(clearInterval(d),d=null)}function S(){u<0&&i()<=0?i(n()):u>0&&i()>=n()?i(0):i(i()+u)}function N(){const at=c()/2**(Math.abs(v)-1);u=v<0?-r():r(),d=setInterval(S,at)}function x(){f(),i(0),v=0}function _(){f(),v=0,u=-r(),S()}function I(){f(),v=0,u=r(),S()}function T(){f(),v=Math.max(v-1,-p),N()}function $(){f(),v=Math.min(v+1,p),N()}function M(){f(),v=0}us(()=>{f()});var B=ul(),rt=l(B);rt.__click=x;var ot=s(rt,2);ot.__click=T;var L=s(ot,2);L.__click=_;var y=s(L,2);y.__click=M;var q=s(y,2);q.__click=I;var E=s(q,2);E.__click=$;var Q=s(E,2);st(Q);var K=s(Q,2);st(K),a(B),et(()=>{Z(Q,"max",n()),Z(Q,"step",r()),Z(K,"max",n()),Z(K,"step",r())}),ge(Q,i),ge(K,i),F(e,B),_t()}Rt(["click"]);var _l=(e,t)=>t.zoomClick("zoomInit"),ml=(e,t)=>t.zoomClick("zoomIn"),bl=(e,t)=>t.zoomClick("zoomOut"),gl=(e,t)=>t.zoomClick("moveLeft"),xl=(e,t)=>t.zoomClick("moveRight"),kl=(e,t)=>t.zoomClick("moveUp"),jl=(e,t)=>t.zoomClick("moveDown"),pl=U('<nav class="svelte-et5lcr"><button aria-labelledby="zoomInit" class="svelte-et5lcr"><div class="zero svelte-et5lcr"></div></button><button aria-labelledby="zoomIn" class="svelte-et5lcr"><div class="zoomin svelte-et5lcr"></div></button><button aria-labelledby="zoomOut" class="svelte-et5lcr"><div class="zoomout svelte-et5lcr"></div></button><button aria-labelledby="moveLeft" class="svelte-et5lcr"><div class="arrowleft svelte-et5lcr"></div></button><button aria-labelledby="moveRight" class="svelte-et5lcr"><div class="arrowright svelte-et5lcr"></div></button><button aria-labelledby="moveUp" class="svelte-et5lcr"><div class="arrowup svelte-et5lcr"></div></button><button aria-labelledby="moveDown" class="svelte-et5lcr"><div class="arrowdown svelte-et5lcr"></div></button></nav>');function hl(e,t){ft(t,!0);var n=pl(),r=l(n);r.__click=[_l,t];var c=s(r);c.__click=[ml,t];var i=s(c);i.__click=[bl,t];var d=s(i);d.__click=[gl,t];var v=s(d);v.__click=[xl,t];var u=s(v);u.__click=[kl,t];var p=s(u);p.__click=[jl,t],a(n),F(e,n),_t()}Rt(["click"]);var X=xs(()=>h),yl=U('<div class="svelte-1rsbkj"><label class="svelte-1rsbkj"><input type="checkbox" class="svelte-1rsbkj"/>main part</label> <label class="svelte-1rsbkj"><input type="checkbox" class="svelte-1rsbkj"/>main skeleton</label> <label class="svelte-1rsbkj"><input type="checkbox" class="svelte-1rsbkj"/>second parts</label> <label class="svelte-1rsbkj"><input type="checkbox" class="svelte-1rsbkj"/>second skeletons</label> <label class="svelte-1rsbkj"><input type="checkbox" class="svelte-1rsbkj"/>dynamics</label> <label class="svelte-1rsbkj"><input type="checkbox" class="svelte-1rsbkj"/>ruler</label> <label class="svelte-1rsbkj"><input type="checkbox" class="svelte-1rsbkj"/>frame of reference</label> <label class="svelte-1rsbkj"><input type="checkbox" class="svelte-1rsbkj"/>points</label> <label class="svelte-1rsbkj"><input type="checkbox" class="svelte-1rsbkj"/>lines</label> <label class="svelte-1rsbkj"><input type="checkbox" class="svelte-1rsbkj"/>vectors</label></div>');function wl(e,t){ft(t,!1),ds();var n=yl(),r=l(n),c=l(r);st(c),zt(),a(r);var i=s(r,2),d=l(i);st(d),zt(),a(i);var v=s(i,2),u=l(v);st(u),zt(),a(v);var p=s(v,2),f=l(p);st(f),zt(),a(p);var S=s(p,2),N=l(S);st(N),zt(),a(S);var x=s(S,2),_=l(x);st(_),zt(),a(x);var I=s(x,2),T=l(I);st(T),zt(),a(I);var $=s(I,2),M=l($);st(M),zt(),a($);var B=s($,2),rt=l(B);st(rt),zt(),a(B);var ot=s(B,2),L=l(ot);st(L),zt(),a(ot),a(n),Lt(c,()=>X().dLayers.main,y=>X(X().dLayers.main=y)),Lt(d,()=>X().dLayers.mainB,y=>X(X().dLayers.mainB=y)),Lt(u,()=>X().dLayers.second,y=>X(X().dLayers.second=y)),Lt(f,()=>X().dLayers.secondB,y=>X(X().dLayers.secondB=y)),Lt(N,()=>X().dLayers.dynamics,y=>X(X().dLayers.dynamics=y)),Lt(_,()=>X().dLayers.ruler,y=>X(X().dLayers.ruler=y)),Lt(T,()=>X().dLayers.refframe,y=>X(X().dLayers.refframe=y)),Lt(M,()=>X().dLayers.points,y=>X(X().dLayers.points=y)),Lt(rt,()=>X().dLayers.lines,y=>X(X().dLayers.lines=y)),Lt(L,()=>X().dLayers.vectors,y=>X(X().dLayers.vectors=y)),F(e,n),_t()}var Dl=U('<section class="svelte-1lstqwr"><!> <div class="rack svelte-1lstqwr"><canvas class="full svelte-1lstqwr"></canvas> <!></div> <div class="rack svelte-1lstqwr"><canvas class="zoom svelte-1lstqwr"></canvas> <!></div></section>');function zl(e,t){ft(t,!0);let n=Nt(t,"simTime",15,0);const r=400,c=1200;let i=H(r),d,v,u;function p(m,z){if(d){const C=d.getContext("2d");C.clearRect(0,0,C.canvas.width,C.canvas.height);try{u=m.getAdjustFull(C.canvas.width,C.canvas.height),m.draw(C,u,z)}catch(Y){console.log(Y)}}}function f(m,z,C){if(v){const Y=v.getContext("2d");Y.clearRect(0,0,Y.canvas.width,Y.canvas.height);try{(z===void 0||z.init===0)&&(z=m.getAdjustZoom(Y.canvas.width,Y.canvas.height)),m.draw(Y,z,C)}catch(xt){console.log(xt)}}}function S(){const m=d.getContext("2d"),z=v.getContext("2d"),C=Math.min(Math.max(.4*o(i),r),c);m.canvas.width=C,m.canvas.height=C,z.canvas.width=C,z.canvas.height=C,h.canvasZWidth=C,h.zAdjust.init===0&&(h.zAdjust=t.pFig.getAdjustZoom(z.canvas.width,z.canvas.height))}function N(){S(),p(t.pFig,h.dLayers),f(t.pFig,h.zAdjust,h.dLayers)}function x(m,z,C){p(m,C),f(m,z,C)}fs(()=>{S()}),ma(()=>{x(t.pFig,h.zAdjust,h.dLayers)});function _(m){const z=v.getContext("2d");switch(m){case"zoomInit":h.zAdjust=t.pFig.getAdjustZoom(z.canvas.width,z.canvas.height);break;case"zoomIn":h.zAdjust=Je(.7,h.zAdjust);break;case"zoomOut":h.zAdjust=Je(1.3,h.zAdjust);break;case"moveLeft":h.zAdjust.xMin+=-.2*h.zAdjust.xyDiff;break;case"moveRight":h.zAdjust.xMin+=.2*h.zAdjust.xyDiff;break;case"moveUp":h.zAdjust.yMin+=.2*h.zAdjust.xyDiff;break;case"moveDown":h.zAdjust.yMin+=-.2*h.zAdjust.xyDiff;break;default:console.log(`ERR423: ${m} has no case!`)}f(t.pFig,h.zAdjust,h.dLayers)}const I=3e3,T=10,$=3;let M={timestamp:0,offsetX:0,offsetY:0};function B(m){m.button===0&&(M.timestamp=Date.now(),M.offsetX=m.offsetX,M.offsetY=m.offsetY)}function rt(m){if(m.button===0)if(Date.now()-M.timestamp<I){const z=Math.abs(M.offsetX-m.offsetX),C=Math.abs(M.offsetY-m.offsetY);if(z<T&&C<T){const[Y,xt]=te(m.offsetX,m.offsetY,u);h.zAdjust=ts(Y,xt,h.zAdjust),x(t.pFig,h.zAdjust,h.dLayers)}if(z>T&&C>T){const Y=z/C,xt=1/Y;if(Y<$&&xt<$){const[Ut,St]=te(m.offsetX,m.offsetY,u),[Vt,At]=te(M.offsetX,M.offsetY,u),Yt=v.getContext("2d").canvas.width;h.zAdjust=es(Ut,St,Vt,At,Yt,Yt),x(t.pFig,h.zAdjust,h.dLayers)}}}else console.log(`Warn205: ignore ${m.offsetX} ${m.offsetY} because too slow`)}function ot(m){if(d){const z=d.getContext("2d");if(m.buttons===1){const C=m.offsetX-M.offsetX,Y=m.offsetY-M.offsetY;p(t.pFig,h.dLayers),z.beginPath(),z.rect(M.offsetX,M.offsetY,C,Y),z.strokeStyle=ca.mouse,z.stroke()}if(h.dLayers.ruler){const[C,Y]=te(m.offsetX,m.offsetY,u);z.clearRect(5,5,200,25),z.font="15px Arial",z.fillStyle=ca.ruler,z.fillText(`x: ${C.toFixed(4)} y: ${Y.toFixed(4)}`,5,20)}}}let L,y,q;function E(m){if(m.button===0){const[z,C]=te(m.offsetX,m.offsetY,h.zAdjust);L=z,y=C,q=as(h.zAdjust)}}function Q(m){if(m.buttons===1){const[z,C]=te(m.offsetX,m.offsetY,q);h.zAdjust=ss(L,y,z,C,q),f(t.pFig,h.zAdjust,h.dLayers)}else if(h.dLayers.ruler&&v){const z=v.getContext("2d"),[C,Y]=te(m.offsetX,m.offsetY,h.zAdjust);z.clearRect(5,5,200,25),z.font="15px Arial",z.fillStyle=ca.ruler,z.fillText(`x: ${C.toFixed(4)} y: ${Y.toFixed(4)}`,5,20)}}function K(m){m.preventDefault(),m.deltaY>0?h.zAdjust=Je(.7,h.zAdjust):h.zAdjust=Je(1.3,h.zAdjust),f(t.pFig,h.zAdjust,h.dLayers)}var at=Dl();ja("resize",Ba,N);var vt=l(at);wl(vt,{});var lt=s(vt,2),G=l(lt);Z(G,"width",r),Z(G,"height",r),G.__mousedown=B,G.__mouseup=rt,G.__mousemove=ot,ta(G,m=>d=m,()=>d);var ut=s(G,2);fl(ut,{get tMax(){return t.pDefSim.tMax},get tStep(){return t.pDefSim.tStep},get tUpdate(){return t.pDefSim.tUpdate},get simTime(){return n()},set simTime(m){n(m)}}),a(lt);var gt=s(lt,2),mt=l(gt);Z(mt,"width",r),Z(mt,"height",r),mt.__mousedown=E,mt.__mousemove=Q,ta(mt,m=>v=m,()=>v);var pt=s(mt,2);hl(pt,{zoomClick:_}),a(gt),a(at),gs("innerWidth",m=>j(i,m,!0)),ja("wheel",mt,K),F(e,at),_t()}Rt(["mousedown","mouseup","mousemove"]);var Ll=(e,t,n)=>t(n),Nl=(e,t,n)=>t(n),Sl=U("<tr><td> </td><td> </td><td> </td><td><i> </i></td><td><i> </i></td></tr>"),Al=U('<li class="svelte-lzdpo0"><input type="checkbox" class="toggle svelte-lzdpo0"/> <label class="label svelte-lzdpo0"><div class="arrow svelte-lzdpo0"></div> </label> <button class="svelte-lzdpo0"> </button> <button class="svelte-lzdpo0">Export parameters</button> <div class="nested svelte-lzdpo0"><article class="svelte-lzdpo0"> <strong> </strong> </article> <table class="svelte-lzdpo0"><thead class="svelte-lzdpo0"><tr><td>Num</td><td>Name</td><td>Value</td><td>Init</td><td>Set?</td></tr></thead><tbody class="svelte-lzdpo0"></tbody></table></div></li>'),Cl=U('<section class="svelte-lzdpo0"><h2 class="svelte-lzdpo0">Sub-designs <span class="svelte-lzdpo0"> </span></h2> <ol class="svelte-lzdpo0"></ol></section>');function Ol(e,t){ft(t,!0);const n=bt(()=>Object.keys(t.subD));async function r(x){const _=t.subD[x];Fa(_.partName,ha(_.dparam),!0);const I=`${ea}${t.pLink[_.partName]}`;Ia(I)}function c(x){const _=t.subD[x].partName,I=t.subD[x].dparam,T=`sub-design parameters of ${_} from ${t.origPartName}`;ga(_,ha(I),T)}function i(x){let _="[ ";return _+=`${be(ia(x[0]))}, `,_+=`${be(ia(x[1]))}, `,_+=`${be(ia(x[2]))} ]`,_}function d(x){let _="[ ";return _+=`${be(x[0])}, `,_+=`${be(x[1])}, `,_+=`${be(x[2])} ]`,_}function v(x){return x?"Yes":""}var u=Cl(),p=l(u),f=s(l(p)),S=l(f);a(f),a(p);var N=s(p,2);Ot(N,20,()=>o(n),x=>x,(x,_)=>{var I=Al(),T=l(I);st(T),ls(T,!1);var $=s(T,2),M=s(l($));a($);var B=s($,2);B.__click=[Ll,r,_];var rt=l(B);a(B);var ot=s(B,2);ot.__click=[Nl,c,_];var L=s(ot,2),y=l(L),q=l(y),E=s(q),Q=l(E,!0);a(E);var K=s(E);a(y);var at=s(y,2),vt=s(l(at));Ot(vt,22,()=>Object.keys(t.subD[_].dparam),lt=>lt,(lt,G,ut)=>{var gt=Sl();let mt;var pt=l(gt),m=l(pt,!0);a(pt);var z=s(pt),C=l(z,!0);a(z);var Y=s(z),xt=l(Y,!0);a(Y);var Ut=s(Y),St=l(Ut),Vt=l(St,!0);a(St),a(Ut);var At=s(Ut),Pt=l(At),Yt=l(Pt,!0);a(Pt),a(At),a(gt),et((qt,se)=>{mt=jt(gt,1,"svelte-lzdpo0",null,mt,qt),w(m,o(ut)+1),w(C,G),w(xt,t.subD[_].dparam[G].val),w(Vt,t.subD[_].dparam[G].init),w(Yt,se)},[()=>({changed:t.subD[_].dparam[G].chg}),()=>v(t.subD[_].dparam[G].chg)]),F(lt,gt)}),a(vt),a(at),a(L),a(I),et((lt,G,ut)=>{Z(T,"id",`cb_${_??""}`),Z($,"for",`cb_${_??""}`),w(M,` ${_??""}`),w(rt,`Go to ${t.pLink[t.subD[_].partName]??""}`),w(q,`${lt??""} parameters of `),w(Q,t.subD[_].partName),w(K,` with orientation ${G??""} (degree) at position
						${ut??""} (mm)`)},[()=>Object.keys(t.subD[_].dparam).length,()=>i(t.subD[_].orientation),()=>d(t.subD[_].position)]),F(x,I)}),a(N),a(u),et(()=>w(S,`(Number of sub-instances: ${o(n).length??""})`)),F(e,u),_t()}Rt(["click"]);async function Pl(e,t){ga(t.pDef.partName,J[t.pDef.partName],"")}var Fl=(e,t,n)=>{j(t,n,!0)},Ml=U("<button> </button>"),Tl=(e,t,n)=>{j(t,n)},Rl=(e,t,n)=>{t(Zs(n.pDef.partName,J[n.pDef.partName],""))},Ul=(e,t)=>{t("all",nt.eTXTLOG)},Il=async(e,t)=>{await t("compute_log")},Xl=(e,t,n)=>{t(n,nt.eSVG)},Wl=async(e,t,n)=>{await t(`svg_${n}`)},Yl=U('<tr class="svelte-8jmax4"><td class="svelte-8jmax4"> </td><td class="svelte-8jmax4"> </td><td class="svelte-8jmax4">2d- svg</td><td class="svelte-8jmax4"><button class="svelte-8jmax4">preview</button></td><td class="svelte-8jmax4"><button class="svelte-8jmax4">download</button></td></tr>'),ql=(e,t)=>{t("all",nt.eSVGALL)},Vl=async(e,t)=>{await t("allsvg")},Zl=(e,t,n)=>{t(n,nt.eDXF)},El=async(e,t,n)=>{await t(`dxf_${n}`)},Kl=U('<tr class="svelte-8jmax4"><td class="svelte-8jmax4"> </td><td class="svelte-8jmax4"> </td><td class="svelte-8jmax4">2d- dxf</td><td class="svelte-8jmax4"><button class="svelte-8jmax4">preview</button></td><td class="svelte-8jmax4"><button class="svelte-8jmax4">download</button></td></tr>'),Gl=(e,t)=>{t("all",nt.eDXFALL)},Bl=async(e,t)=>{await t("alldxf")},Hl=(e,t)=>{t("all",nt.ePAX)},Jl=async(e,t)=>{await t("pax")},Ql=(e,t)=>{t("all",nt.eOPENSCAD)},$l=async(e,t)=>{await t("oscad")},tn=(e,t)=>{t("all",nt.eJSCAD)},en=async(e,t)=>{await t("ojscad")},an=(e,t)=>{t("all",nt.eFREECAD)},sn=async(e,t)=>{await t("freecad")},ln=async(e,t)=>{await t("zip")},nn=U('<!> <section class="svelte-8jmax4"><h2 class="svelte-8jmax4">Log</h2> <textarea rows="5" cols="94" readonly="" wrap="soft"></textarea></section> <section class="svelte-8jmax4"><h2 class="svelte-8jmax4">2D Drawings : <!> <button>All faces merged</button></h2></section> <!> <section class="svelte-8jmax4"><h2 class="svelte-8jmax4">Export</h2> <table class="svelte-8jmax4"><caption class="svelte-8jmax4">Output files</caption><thead class="svelte-8jmax4"><tr class="svelte-8jmax4"><th class="svelte-8jmax4">#</th><th class="svelte-8jmax4">Filename</th><th class="svelte-8jmax4">Type</th><th class="svelte-8jmax4">Preview</th><th class="svelte-8jmax4">Download</th></tr></thead><tbody class="svelte-8jmax4"><tr class="svelte-8jmax4"><td class="svelte-8jmax4">1</td><td class="svelte-8jmax4"> </td><td class="svelte-8jmax4">0-params- pxJson</td><td class="svelte-8jmax4"><button class="svelte-8jmax4">preview</button></td><td class="svelte-8jmax4"><button class="svelte-8jmax4">download</button></td></tr><tr class="svelte-8jmax4"><td class="svelte-8jmax4">2</td><td class="svelte-8jmax4"> </td><td class="svelte-8jmax4">1-log- txtLog</td><td class="svelte-8jmax4"><button class="svelte-8jmax4">preview</button></td><td class="svelte-8jmax4"><button class="svelte-8jmax4">download</button></td></tr><!><tr class="svelte-8jmax4"><td class="svelte-8jmax4"> </td><td class="svelte-8jmax4"> </td><td class="svelte-8jmax4">2d- svg</td><td class="svelte-8jmax4"><button class="svelte-8jmax4">preview</button></td><td class="svelte-8jmax4"><button class="svelte-8jmax4">download</button></td></tr><!><tr class="svelte-8jmax4"><td class="svelte-8jmax4"> </td><td class="svelte-8jmax4"> </td><td class="svelte-8jmax4">2d- dxf</td><td class="svelte-8jmax4"><button class="svelte-8jmax4">preview</button></td><td class="svelte-8jmax4"><button class="svelte-8jmax4">download</button></td></tr><tr class="svelte-8jmax4"><td class="svelte-8jmax4"> </td><td class="svelte-8jmax4"> </td><td class="svelte-8jmax4">4-pax- paxJson</td><td class="svelte-8jmax4"><button class="svelte-8jmax4">preview</button></td><td class="svelte-8jmax4"><button class="svelte-8jmax4">download</button></td></tr><tr class="svelte-8jmax4"><td class="svelte-8jmax4"> </td><td class="svelte-8jmax4"> </td><td class="svelte-8jmax4">5-script- scad</td><td class="svelte-8jmax4"><button class="svelte-8jmax4">preview</button></td><td class="svelte-8jmax4"><button class="svelte-8jmax4">download</button></td></tr><tr class="svelte-8jmax4"><td class="svelte-8jmax4"> </td><td class="svelte-8jmax4"> </td><td class="svelte-8jmax4">5-script- jsCad</td><td class="svelte-8jmax4"><button class="svelte-8jmax4">preview</button></td><td class="svelte-8jmax4"><button class="svelte-8jmax4">download</button></td></tr><tr class="svelte-8jmax4"><td class="svelte-8jmax4"> </td><td class="svelte-8jmax4"> </td><td class="svelte-8jmax4">5-script- pyFreecad</td><td class="svelte-8jmax4"><button class="svelte-8jmax4">preview</button></td><td class="svelte-8jmax4"><button class="svelte-8jmax4">download</button></td></tr><tr class="svelte-8jmax4"><td class="svelte-8jmax4"> </td><td class="svelte-8jmax4"> </td><td class="svelte-8jmax4">6-zip- zip</td><td class="svelte-8jmax4"></td><td class="svelte-8jmax4"><button class="svelte-8jmax4">download</button></td></tr></tbody></table> <dialog id="dBview" class="svelte-8jmax4"><textarea readonly="" wrap="soft" class="svelte-8jmax4"></textarea> <button class="bback svelte-8jmax4">close - back - escape</button></dialog> <!></section>',1);function rn(e,t){ft(t,!0);const n="ParametrixAll";function r(b){let O=!0;const P=/warn/i;return b.search(P)<0&&(O=!1),O}function c(b,O){let P=O;if(b.length===0)console.log("warn404: Drawing has an empty face list");else{const A=b.slice();A.push(n),A.includes(P)||(P=b[0])}return P}function i(b,O){let P;const A=Object.keys(b),V=c(A,O);return A.includes(V)?P=b[V]:P=is(b),P}let d=H(0),v=H(n);Sa(()=>{j(v,c(Object.keys(t.fgeom(0,J[t.pDef.partName]).fig),""),!0)});let u=bt(()=>t.fgeom(o(d),J[t.pDef.partName])),p=bt(()=>{const b=new Date().toLocaleTimeString();let O=`Geometry ${t.pDef.partName} computed at ${b}
`;return O+=o(u).logstr,O}),f=bt(()=>Object.keys(o(u).fig)),S=bt(()=>o(u).calcErr),N=bt(()=>r(o(u).logstr)),x=bt(()=>i(o(u).fig,o(v))),_=bt(()=>o(u).sub);function I(b,O){const P=document.createElement("a"),A=URL.createObjectURL(O);P.setAttribute("href",A),P.setAttribute("download",b),P.click(),P.remove(),URL.revokeObjectURL(A)}function T(b,O,P){const A=document.createElement("a"),V="data:"+P+";utf-8,"+encodeURIComponent(O);A.setAttribute("href",V),A.setAttribute("download",b),A.click(),A.remove()}function $(){const b=/[-:]/g,O=/\..*$/;return new Date().toISOString().replace(b,"").replace(O,"").replace("T","_")}async function M(b){const O=/^svg_/,P=/^dxf_/;let A=nt.eSVG,V="all";b.match(O)?(A=nt.eSVG,V=b.replace(O,"")):b.match(P)?(A=nt.eDXF,V=b.replace(P,"")):b==="allsvg"?A=nt.eSVGALL:b==="alldxf"?A=nt.eDXFALL:b==="compute_log"?A=nt.eTXTLOG:b==="pax"?A=nt.ePAX:b==="oscad"?A=nt.eOPENSCAD:b==="ojscad"?A=nt.eJSCAD:b==="freecad"?A=nt.eFREECAD:b==="zip"?A=nt.eZIP:console.log(`err883: downloadExport iExportFace ${b} invalid`);const it=rs(A),dt=cs(A),Wt=os(A),wt=t.pDef.partName+"_"+V+"_"+$()+it;if(Wt){const Dt=await ns(t.fgeom,o(d),J[t.pDef.partName],t.pDef,A);I(wt,Dt)}else{const Dt=ya(t.fgeom,J[t.pDef.partName],t.pDef,V,A);T(wt,Dt,dt)}}let B,rt=H("");function ot(b){j(rt,b,!0),B.showModal()}function L(b,O){ot(ya(t.fgeom,J[t.pDef.partName],t.pDef,b,O))}function y(){B.close()}var q=nn(),E=Tt(q);dl(E,{get pDef(){return t.pDef},get pFig(){return o(x)}});var Q=s(E,2),K=s(l(Q),2);ua(K);let at;a(Q);var vt=s(Q,2),lt=l(vt),G=s(l(lt));Ot(G,16,()=>o(f),b=>b,(b,O)=>{var P=Ml();P.__click=[Fl,v,O];var A=l(P,!0);a(P),et(()=>{jt(P,1,Da({theFace:o(v)===O}),"svelte-8jmax4"),w(A,O)}),F(b,P)});var ut=s(G,2);ut.__click=[Tl,v,n],a(lt),a(vt);var gt=s(vt,2);zl(gt,{get pDefSim(){return t.pDef.sim},get pFig(){return o(x)},get simTime(){return o(d)},set simTime(b){j(d,b,!0)}});var mt=s(gt,2),pt=s(l(mt),2),m=s(l(pt),2),z=l(m),C=s(l(z)),Y=l(C);a(C);var xt=s(C,2),Ut=l(xt);Ut.__click=[Rl,ot,t],a(xt);var St=s(xt),Vt=l(St);Vt.__click=[Pl,t],a(St),a(z);var At=s(z),Pt=s(l(At)),Yt=l(Pt);a(Pt);var qt=s(Pt,2),se=l(qt);se.__click=[Ul,L],a(qt);var xe=s(qt),aa=l(xe);aa.__click=[Il,M],a(xe),a(At);var ke=s(At);Ot(ke,18,()=>o(f),b=>b,(b,O,P)=>{var A=Yl(),V=l(A),it=l(V,!0);a(V);var dt=s(V),Wt=l(dt);a(dt);var wt=s(dt,2),Dt=l(wt);Dt.__click=[Xl,L,O],a(wt);var $t=s(wt),me=l($t);me.__click=[Wl,M,O],a($t),a(A),et(()=>{w(it,3+o(P)),w(Wt,`${t.pDef.partName??""}_${O??""}.svg`)}),F(b,A)});var le=s(ke),ne=l(le),Xe=l(ne,!0);a(ne);var je=s(ne),We=l(je);a(je);var pe=s(je,2),he=l(pe);he.__click=[ql,L],a(pe);var re=s(pe),Ye=l(re);Ye.__click=[Vl,M],a(re),a(le);var ye=s(le);Ot(ye,18,()=>o(f),b=>b,(b,O,P)=>{var A=Kl(),V=l(A),it=l(V,!0);a(V);var dt=s(V),Wt=l(dt);a(dt);var wt=s(dt,2),Dt=l(wt);Dt.__click=[Zl,L,O],a(wt);var $t=s(wt),me=l($t);me.__click=[El,M,O],a($t),a(A),et(()=>{w(it,4+o(f).length+o(P)),w(Wt,`${t.pDef.partName??""}_${O??""}.dxf`)}),F(b,A)});var oe=s(ye),ce=l(oe),sa=l(ce,!0);a(ce);var ie=s(ce),ve=l(ie);a(ie);var de=s(ie,2),we=l(de);we.__click=[Gl,L],a(de);var qe=s(de),Ve=l(qe);Ve.__click=[Bl,M],a(qe),a(oe);var De=s(oe),g=l(De),k=l(g,!0);a(g);var D=s(g),R=l(D);a(D);var tt=s(D,2),ct=l(tt);ct.__click=[Hl,L],a(tt);var Ft=s(tt),ue=l(Ft);ue.__click=[Jl,M],a(Ft),a(De);var ht=s(De),Kt=l(ht),Gt=l(Kt,!0);a(Kt);var Bt=s(Kt),kt=l(Bt);a(Bt);var Ht=s(Bt,2),Ze=l(Ht);Ze.__click=[Ql,L],a(Ht);var It=s(Ht),W=l(It);W.__click=[$l,M],a(It),a(ht);var ze=s(ht),Zt=l(ze),Ee=l(Zt,!0);a(Zt);var Jt=s(Zt),la=l(Jt);a(Jt);var Qt=s(Jt,2),Le=l(Qt);Le.__click=[tn,L],a(Qt);var Ke=s(Qt),Ne=l(Ke);Ne.__click=[en,M],a(Ke),a(ze);var Se=s(ze),Ae=l(Se),na=l(Ae,!0);a(Ae);var Et=s(Ae),Ge=l(Et);a(Et);var Ce=s(Et,2),fe=l(Ce);fe.__click=[an,L],a(Ce);var Oe=s(Ce),ra=l(Oe);ra.__click=[sn,M],a(Oe),a(Se);var _e=s(Se),Pe=l(_e),Fe=l(Pe,!0);a(Pe);var Me=s(Pe),Te=l(Me);a(Me);var Re=s(Me,3),oa=l(Re);oa.__click=[ln,M],a(Re),a(_e),a(m),a(pt);var yt=s(pt,2),Xt=l(yt);ua(Xt);var Ct=s(Xt,2);Ct.__click=y,a(yt),ta(yt,b=>B=b,()=>B);var Mt=s(yt,2);Ol(Mt,{get subD(){return o(_)},get origPartName(){return t.pDef.partName},get pLink(){return t.pLink}}),a(mt),et(b=>{$e(K,o(p)),at=jt(K,1,"svelte-8jmax4",null,at,b),jt(ut,1,Da({theFace:o(v)===n}),"svelte-8jmax4"),w(Y,`px_${t.pDef.partName??""}.json`),w(Yt,`${t.pDef.partName??""}_all.log`),w(Xe,3+o(f).length),w(We,`${t.pDef.partName??""}_all.svg`),w(sa,4+2*o(f).length),w(ve,`${t.pDef.partName??""}_all.dxf`),w(k,5+2*o(f).length),w(R,`${t.pDef.partName??""}_all.pax.json`),w(Gt,6+2*o(f).length),w(kt,`${t.pDef.partName??""}_all_noarc_openscad.scad`),w(Ee,7+2*o(f).length),w(la,`${t.pDef.partName??""}_all_noarc_jscad.js`),w(na,8+2*o(f).length),w(Ge,`${t.pDef.partName??""}_all_freecad.py`),w(Fe,9+2*o(f).length),w(Te,`${t.pDef.partName??""}_all.zip`),$e(Xt,o(rt))},[()=>({colorErr:o(S),colorWarn:o(N)})]),F(e,q),_t()}Rt(["click"]);var on=U('<h1 class="svelte-1aya6oa"> </h1> <article class="svelte-1aya6oa"> </article> <!> <!>',1);function cn(e,t){ft(t,!0),ps(t.pageDef);var n=on(),r=Tt(n),c=l(r,!0);a(r);var i=s(r,2),d=l(i);a(i);var v=s(i,2);Ls(v,{get pDef(){return t.pageDef.pDef}});var u=s(v,2);rn(u,{get pDef(){return t.pageDef.pDef},get fgeom(){return t.pageDef.pGeom},get pLink(){return t.pLink}}),et(()=>{w(c,t.pageDef.pTitle),w(d,`[${t.pageDef.pDef.partName??""}]: ${t.pageDef.pDescription??""}`)}),F(e,n),_t()}function hn(e,t){ft(t,!0),cn(e,{get pageDef(){return t.data.pageDef},get pLink(){return t.data.allLink}}),_t()}export{hn as component,pn as universal};
